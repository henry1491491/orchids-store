(function(t){function e(e){for(var a,i,n=e[0],l=e[1],c=e[2],d=0,p=[];d<n.length;d++)i=n[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,n=1;n<s.length;n++){var l=s[n];0!==r[l]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},r={app:0},o=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/shop-demo/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=l;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},3348:function(t,e,s){"use strict";var a=s("5aec"),r=s.n(a);r.a},"35b1":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("base-alert"),s("router-view")],1)},o=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(t.messages,(function(e,a){return s("b-alert",{key:a,staticClass:"d-flex justify-content-center",attrs:{variant:e.variant,dismissible:"",fade:"",show:""}},[s("span",{staticClass:"text-center"},[t._v(t._s(e.msg))])])})),1)},n=[],l={name:"BaseAlert",computed:{messages(){return this.$store.state.alert.messages}}},c=l,u=s("2877"),d=Object(u["a"])(c,i,n,!1,null,null,null),p=d.exports,m={name:"App",components:{BaseAlert:p}},h=m,f=(s("5c0b"),Object(u["a"])(h,r,o,!1,null,null,null)),b=f.exports,v=s("8c4f"),g=s("bc3a"),_=s.n(g),x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"views-thelogin"}},[s("b-card",{attrs:{title:"請登入"}},[s("validation-observer",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.passes;return[t.show?s("b-form",{on:{submit:function(e){return e.preventDefault(),a(t.signIn)}}},[s("validation-provider",{attrs:{name:"信箱",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("b-form-group",{attrs:{id:"input-group-1","label-for":"input-1"}},[s("b-form-input",{attrs:{id:"input-1",state:t.getValidationState(e),placeholder:"請輸入帳號",required:""},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}}),s("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)}),s("validation-provider",{attrs:{name:"密碼",rules:"required|min:6|max:12"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("b-form-group",{attrs:{id:"input-group-2","label-for":"input-2"}},[s("b-form-input",{attrs:{id:"input-2",state:t.getValidationState(e),placeholder:"請輸入密碼",required:"",type:"password"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),s("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)}),s("b-button",{attrs:{size:"sm",type:"submit",variant:"primary"},on:{click:t.signIn}},[t._v(" 提交 ")])],1):t._e()]}}])})],1)],1)},C=[],y=s("a7fe"),w=s.n(y),$=s("2f62"),T={namespaced:!0,state:{messages:[]},mutations:{SET_MESSAGES_ALERT(t,e){t.messages.push(e)},DELETE_MESSAGES_ALERT(t,e){t.messages.forEach((s,a)=>{s.id===e.id&&t.messages.splice(a,1)})}},actions:{async setMsgsAlert({commit:t,dispatch:e},s){return t("SET_MESSAGES_ALERT",s),e("delMsgsAlert",s),{status:!0}},async delMsgsAlert({commit:t},e){let s;s=e.duration?e.duration:3e3,window.setTimeout(()=>{t("DELETE_MESSAGES_ALERT",e)},s)}}},k={namespaced:!0,state:{carts:[],cartsTotal:{},categories:[],filterProducts:[],order:{},priceZone:[],productsAll:[],sortTitle:"全部",status:{loadingItem:""}},mutations:{SET_CARTS(t,e){t.carts=e},SET_CARTS_TOTAL(t,e){t.cartsTotal=e},SET_CATEGORIES(t){if(!t.productsAll)return;const e=Array.from(new Set(t.productsAll.map(t=>t.category)));e.splice(0,0,"全部"),t.categories=e},SET_FILTER_PRODUCTS(t){t.filterProducts=t.productsAll},SET_FILTER_PRODUCTS_BY_SORT(t,e){"hign"===e?t.filterProducts.sort((t,e)=>e.price-t.price):"low"===e&&t.filterProducts.sort((t,e)=>t.price-e.price)},SET_PRODUCTS_ALL(t,e){t.productsAll=e},SET_SORT_TITLE(t,e){t.sortTitle=e},SET_STATUS_LOADINGITEM(t,e){t.status.loadingItem=e},SET_ORDER(t,e){t.order=e},UPDATE_FILTER_PRODUCTS(t,e){t.filterProducts=e}},actions:{async addToCart({commit:t,dispatch:e},s){try{t("SET_STATUS_LOADINGITEM",s.id);const a={product_id:s.id,qty:s.qty},r=await V({data:a});if(!r.data.success)return;return t("SET_STATUS_LOADINGITEM",""),e("getCart"),this._$alert(r.data.message,"warning")}catch(a){console.log(a)}},async getCart({commit:t}){try{const e=await H();if(!e.data.success)return;return t("SET_CARTS",e.data.data.carts),t("SET_CARTS_TOTAL",{total:e.data.data.total,final_total:e.data.data.final_total}),{status:"success"}}catch(e){return console.log(e),{status:"false"}}},async getProductsAll({dispatch:t}){try{const e=await J();if(!e.data.success)return;t("initialize",e.data.products)}catch(e){console.log(e)}},async initialize({commit:t},e){t("SET_PRODUCTS_ALL",e),t("SET_FILTER_PRODUCTS",e),t("SET_CATEGORIES")}}};a["default"].use($["a"]);var S=new $["a"].Store({strict:!0,state:{loadingAmount:0,messages:[]},getters:{isLoading:t=>t.loadingAmount>0},mutations:{SET_LOADING:(t,e)=>{e?++t.loadingAmount:--t.loadingAmount}},actions:{setLoading({commit:t},e){t("SET_LOADING",e)}},modules:{customer:k,alert:T}});a["default"].use(w.a,_.a),_.a.defaults.baseURL="https://vue-course-api.hexschool.io/api/henli",_.a.defaults.withCredentials=!0;const P=_.a.create({baseURL:"https://vue-course-api.hexschool.io"}),O=_.a.create({baseURL:"https://vue-course-api.hexschool.io/api/henli"}),E=_.a.create({baseURL:"https://vue-course-api.hexschool.io/api/henli"}),L=t=>P.post("/admin/signin",t),A=()=>P.post("/logout"),I=(t,e)=>O.post("/admin/upload",t,e),z=t=>O.get(`/admin/products?page=${t}`),N=t=>O.delete(`/admin/product/${t.id}`),D=t=>O.get(`/admin/orders?page=${t}`),j=t=>O.get(`/admin/coupons?page=${t}`),M=t=>O.delete(`/admin/coupon/${t.id}`),F=t=>O.get(`/order/${t}`),R=t=>O.post(`/pay/${t}`),U=t=>E.get(`/product/${t}`),B=t=>E.delete(`/cart/${t}`),q=t=>O.post("/coupon",t),G=t=>O.post("/order",t),H=()=>E.get("/cart"),V=t=>E.post("/cart",t),J=()=>O.get("/products/all");O.interceptors.request.use(t=>(S.dispatch("setLoading",!0),t),t=>Promise.reject(t)),O.interceptors.response.use(t=>(S.dispatch("setLoading",!1),t),t=>(S.dispatch("setLoading",!1),Promise.reject(t)));var Y={data(){return{form:{email:"",name:"",food:null,checked:[]},show:!0,user:{username:"",password:""}}},methods:{getValidationState({dirty:t,validated:e,valid:s=null}){return t||e?s:null},async signIn(){try{const t=await L(this.user);if(!t.data.success)return;this.$router.push("/admin/products"),this.$store.dispatch("alert/setMsgsAlert",this._$alert(t.data.message))}catch(t){throw new Error(t)}}}},Q=Y,W=Object(u["a"])(Q,x,C,!1,null,null,null),Z=W.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"views-thedashboard"}},[s("nav",{staticClass:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow"},[s("a",{staticClass:"navbar-brand col-sm-3 col-md-2 mr-0",attrs:{href:"#"}},[t._v(" Orchids 蘭園管理後台 ")]),s("input",{staticClass:"form-control form-control-dark w-100",attrs:{type:"text",placeholder:"Search","aria-label":"Search"}}),s("ul",{staticClass:"navbar-nav px-3"},[s("li",{staticClass:"nav-item text-nowrap"},[s("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v(" 登出 ")])])])]),s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("nav",{staticClass:"col-md-2 d-none d-md-block bg-light sidebar"},[s("div",{staticClass:"sidebar-sticky"},[t._m(0),s("ul",{staticClass:"nav flex-column"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link d-flex align-items-center",attrs:{to:"/admin/products"}},[s("flower-icon",{staticClass:"mr-1"}),s("span",[t._v("產品列表")])],1)],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link d-flex align-items-center",attrs:{to:"/admin/orders"}},[s("flower-icon",{staticClass:"mr-1"}),s("span",[t._v("訂單列表")])],1)],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link d-flex align-items-center",attrs:{to:"/admin/coupons"}},[s("flower-icon",{staticClass:"mr-1"}),s("span",[t._v("優惠券")])],1)],1)]),t._m(1),s("ul",{staticClass:"nav flex-column mb-2"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link d-flex align-items-center",attrs:{to:"/"}},[s("clipboard-list-outline-icon",{staticClass:"mr-1"}),s("span",[t._v("模擬訂單")])],1)],1)])])]),s("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 px-4",attrs:{role:"main"}},[s("router-view")],1)])])])},X=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[s("span",[t._v("管理員")]),s("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#","aria-label":"Add a new report"}},[s("span",{attrs:{"data-feather":"plus-circle"}})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[s("span",[t._v("模擬功能")]),s("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#","aria-label":"Add a new report"}},[s("span",{attrs:{"data-feather":"plus-circle"}})])])}],tt={name:"TheDashboard",data(){return{fullPage:!0}},methods:{async signOut(){try{const t=await A();if(!t.data.success)return;this.$router.push("/login")}catch(t){console.log(t)}}}},et=tt,st=Object(u["a"])(et,K,X,!1,null,null,null),at=st.exports,rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{attrs:{fluid:"",id:"views-thedashboard_products"}},[t.isLoading?t._e():s("b-button",{staticClass:"m-3 float-right",attrs:{id:"show-edit-product"},on:{click:function(e){return t.showEditProduct(!0)}}},[t._v(" 建立商品 ")]),s("b-modal",{ref:"edit-product-modal",attrs:{size:"lg",title:"新增 / 編輯商品"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[s("div",{staticClass:"w-100"},[s("b-button",{staticClass:"float-right",attrs:{size:"md",variant:"primary"},on:{click:t.updateProduct}},[t._v(" 確認 ")]),s("b-button",{staticClass:"mr-1 float-right",attrs:{size:"md",variant:"danger"},on:{click:t.cancerEditProduct}},[t._v(" 取消 ")])],1)]},proxy:!0}])},[s("b-row",[s("b-col",{attrs:{cols:"3"}},[s("b-form-group",{attrs:{id:"input-group-1",label:"輸入圖片網址","label-for":"input-1"}},[s("b-form-input",{attrs:{id:"input-1",placeholder:"請輸入圖片連結",size:"sm",type:"text"},model:{value:t.tempProduct.imageUrl,callback:function(e){t.$set(t.tempProduct,"imageUrl",e)},expression:"tempProduct.imageUrl"}})],1),s("b-form-file",{ref:"file-input",staticClass:"mt-3",attrs:{plain:""},on:{change:t.uploadFile},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),s("b-img",{staticClass:"mt-1",attrs:{src:t.tempProduct.imageUrl,alt:t.tempProduct.title,fluid:"",thumbnail:""}})],1),s("b-col",{attrs:{cols:"9"}},[s("b-form-group",{attrs:{id:"input-group-2",label:"標題","label-for":"input-2"}},[s("b-form-input",{attrs:{id:"input-2",placeholder:"請輸入標題",size:"sm",type:"text"},model:{value:t.tempProduct.title,callback:function(e){t.$set(t.tempProduct,"title",e)},expression:"tempProduct.title"}})],1),s("b-row",[s("b-col",[s("b-form-group",{attrs:{id:"input-group-3",label:"分類","label-for":"input-3"}},[s("b-form-input",{attrs:{id:"input-3",placeholder:"請輸入分類",size:"sm",type:"text"},model:{value:t.tempProduct.category,callback:function(e){t.$set(t.tempProduct,"category",e)},expression:"tempProduct.category"}})],1)],1),s("b-col",[s("b-form-group",{attrs:{id:"input-group-4",label:"單位","label-for":"input-4"}},[s("b-form-input",{attrs:{id:"input-4",placeholder:"請輸入單位",size:"sm",type:"text"},model:{value:t.tempProduct.unit,callback:function(e){t.$set(t.tempProduct,"unit",e)},expression:"tempProduct.unit"}})],1)],1)],1),s("b-row",[s("b-col",[s("b-form-group",{attrs:{id:"input-group-5",label:"原價","label-for":"input-5"}},[s("b-form-input",{attrs:{id:"input-5",placeholder:"請輸入原價",size:"sm",type:"number"},model:{value:t.tempProduct.origin_price,callback:function(e){t.$set(t.tempProduct,"origin_price",e)},expression:"tempProduct.origin_price"}})],1)],1),s("b-col",[s("b-form-group",{attrs:{id:"input-group-6",label:"售價","label-for":"input-6"}},[s("b-form-input",{attrs:{id:"input-6",placeholder:"請輸入售價",size:"sm",type:"number"},model:{value:t.tempProduct.price,callback:function(e){t.$set(t.tempProduct,"price",e)},expression:"tempProduct.price"}})],1)],1)],1),s("b-form-group",{staticClass:"b-form-group-textarea",attrs:{label:"商品描述"}},[s("b-form-textarea",{attrs:{id:"textarea1",placeholder:"請輸入商品描述",rows:"2",size:"sm"},model:{value:t.tempProduct.description,callback:function(e){t.$set(t.tempProduct,"description",e)},expression:"tempProduct.description"}})],1),s("b-form-group",{attrs:{label:"說明內容"}},[s("b-form-textarea",{attrs:{id:"textarea2",placeholder:"請輸入說明內容",rows:"2",size:"sm"},model:{value:t.tempProduct.content,callback:function(e){t.$set(t.tempProduct,"content",e)},expression:"tempProduct.content"}})],1),s("b-form-checkbox",{attrs:{id:"checkbox-1",name:"checkbox-1","unchecked-value":"0",value:"1"},model:{value:t.tempProduct.is_enabled,callback:function(e){t.$set(t.tempProduct,"is_enabled",e)},expression:"tempProduct.is_enabled"}},[t._v(" 是否啟用？ ")])],1)],1)],1),t.isLoading?s("v-skeleton-loader",{staticClass:"mt-5",attrs:{type:"table"}}):t._e(),t.isLoading?t._e():s("b-table",{attrs:{items:t.products,fields:t.fields,responsive:"",small:"",stacked:"md",striped:""},scopedSlots:t._u([{key:"cell(origin_price)",fn:function(e){return[t._v(" "+t._s(t._f("currency")(e.item.origin_price))+" ")]}},{key:"cell(price)",fn:function(e){return[t._v(" "+t._s(t._f("currency")(e.item.price))+" ")]}},{key:"cell(is_enabled)",fn:function(e){return[s("p",{directives:[{name:"show",rawName:"v-show",value:e.item.is_enabled,expression:"data.item.is_enabled"}],staticClass:"text-success"},[t._v(" 是 ")]),s("p",{directives:[{name:"show",rawName:"v-show",value:!e.item.is_enabled,expression:"!data.item.is_enabled"}],staticClass:"text-danger"},[t._v(" 否 ")])]}},{key:"cell(actions)",fn:function(e){return[s("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(s){return t.showEditProduct(!1,e.item)}}},[t._v(" 編輯 ")]),s("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(s){return t.deleteProduct(e.item)}}},[t._v(" 刪除 ")])]}}],null,!1,647427825)}),t.isLoading?t._e():s("b-pagination-default",{attrs:{pagination:t.pagination},on:{paginate:t.getProducts}})],1)},ot=[],it={name:"TheDashboardProducts",data(){return{file:null,fields:[{key:"category",label:"分類"},{key:"title",label:"名稱"},{key:"origin_price",label:"原價"},{key:"price",label:"售價"},{key:"is_enabled",label:"是否啟用"},{key:"actions",label:"編輯"}],isNew:!1,pagination:{},products:[],tempProduct:{title:"",category:"",origin_price:null,price:null,unit:"",image:"",description:"",content:"",is_enabled:1,imageUrl:""}}},computed:{isLoading(){return this.$store.getters.isLoading}},mounted(){this.getProducts()},methods:{showEditProduct(t,e){t?(this.tempProduct={},this.isNew=!0):(this.tempProduct=Object.assign({},e),this.isNew=!1),this.$refs["edit-product-modal"].show()},cancerEditProduct(){this.$refs["edit-product-modal"].hide()},async deleteProduct(t){try{const e=await N(t);if(!e.data.success)return;this.getProducts(),this.$store.dispatch("alert/setMsgsAlert",this._$alert(e.data.message,"warning"))}catch(e){console.log(e)}},async updateProduct(){try{let t="/admin/product",e="post";this.isNew||(t=`/admin/product/${this.tempProduct.id}`,e="put");const s=await this.axios[e](t,{data:this.tempProduct});s.data.success?(this.$refs["edit-product-modal"].hide(),this.getProducts(this.pagination.current_page),this.$store.dispatch("alert/setMsgsAlert",this._$alert(s.data.message))):(this.$refs["edit-product-modal"].hide(),this.getProducts(this.pagination.current_page),this.$store.dispatch("alert/setMsgsAlert",this._$alert(s.data.message,"danger")))}catch(t){console.log(t)}},async uploadFile(){try{const t=this.$refs["file-input"].$refs.input.files[0],e=new FormData;e.append("file-to-upload",t);const s=await I(e,{headers:{"Content-Type":"multipart/form-data"}});if(!s.data.success)return;this.$set(this.tempProduct,"imageUrl",s.data.imageUrl)}catch(t){console.log(t)}},async getProducts(t=1){try{const e=await z(t);if(!e.data.success)return;this.products=e.data.products,this.pagination=e.data.pagination}catch(e){console.log(e)}}}},nt=it,lt=Object(u["a"])(nt,rt,ot,!1,null,null,null),ct=lt.exports,ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{attrs:{id:"views-thedashboard_orders",fluid:""}},[s("b-modal",{ref:"edit-order-modal",attrs:{size:"lg",title:"BootstrapVue"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[s("div",{staticClass:"w-100"},[s("b-button",{staticClass:"float-right",attrs:{size:"md",variant:"primary"},on:{click:t.updateOrder}},[t._v(" 確認 ")]),s("b-button",{staticClass:"mr-1 float-right",attrs:{size:"md",variant:"danger"},on:{click:t.cancerEditOrder}},[t._v(" 取消 ")])],1)]},proxy:!0}])},[s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"2"}},[s("label",{attrs:{for:"input-small"}},[t._v(" 顧客信箱 ")])]),s("b-col",{attrs:{sm:"10"}},[s("b-form-input",{attrs:{id:"email",placeholder:"修改顧客信箱",size:"sm"},model:{value:t.tempOrder.user.email,callback:function(e){t.$set(t.tempOrder.user,"email",e)},expression:"tempOrder.user.email"}})],1)],1),s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"2"}},[s("label",{attrs:{for:"input-small"}},[t._v(" 顧客住址 ")])]),s("b-col",{attrs:{sm:"10"}},[s("b-form-input",{attrs:{id:"address",placeholder:"修改顧客住址",size:"sm"},model:{value:t.tempOrder.user.address,callback:function(e){t.$set(t.tempOrder.user,"address",e)},expression:"tempOrder.user.address"}})],1)],1),s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"2"}},[s("label",{attrs:{for:"input-small"}},[t._v(" 顧客姓名 ")])]),s("b-col",{attrs:{sm:"10"}},[s("b-form-input",{attrs:{id:"name",placeholder:"修改顧客姓名",size:"sm"},model:{value:t.tempOrder.user.name,callback:function(e){t.$set(t.tempOrder.user,"name",e)},expression:"tempOrder.user.name"}})],1)],1),s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"2"}},[s("label",{attrs:{for:"input-small"}},[t._v(" 顧客電話 ")])]),s("b-col",{attrs:{sm:"10"}},[s("b-form-input",{attrs:{id:"tel",placeholder:"修改顧客電話",size:"sm"},model:{value:t.tempOrder.user.tel,callback:function(e){t.$set(t.tempOrder.user,"tel",e)},expression:"tempOrder.user.tel"}})],1)],1),s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"2"}},[s("label",{attrs:{for:"input-small"}},[t._v(" 應付金額 ")])]),s("b-col",{attrs:{sm:"10"}},[s("b-form-input",{attrs:{id:"total",placeholder:"修改應付金額",size:"sm"},model:{value:t.tempOrder.total,callback:function(e){t.$set(t.tempOrder,"total",e)},expression:"tempOrder.total"}})],1)],1),s("b-form-checkbox",{attrs:{id:"checkbox-1",name:"checkbox-1","unchecked-value":"false",value:"true"},model:{value:t.tempOrder.is_paid,callback:function(e){t.$set(t.tempOrder,"is_paid",e)},expression:"tempOrder.is_paid"}},[t._v(" 是否付款 ")])],1),t.isLoading?s("v-skeleton-loader",{staticClass:"mt-5",attrs:{type:"table"}}):t._e(),t.isLoading?t._e():s("b-table",{staticClass:"mt-5",attrs:{items:t.orders,fields:t.fields,responsive:"",small:"",striped:"",stacked:"md"},scopedSlots:t._u([{key:"cell(create_at)",fn:function(e){return[t._v(" "+t._s(t._f("moment")(e.item.create_at,"YYYY年M月D日 HH:mm:ss"))+" ")]}},{key:"cell(user)",fn:function(e){return[t._v(" "+t._s(e.item.user.email)+" ")]}},{key:"cell(products)",fn:function(e){return t._l(e.item.products,(function(e,a){return s("p",{key:a},[t._v(" "+t._s(e.product.title)+" 數量："+t._s(e.qty)+" "+t._s(e.product.unit)+" ")])}))}},{key:"cell(total)",fn:function(e){return[t._v(" "+t._s(t._f("currency")(e.item.total))+" ")]}},{key:"cell(paid_date)",fn:function(e){return[t._v(" "+t._s(t._f("moment")(e.item.paid_date,"YYYY年M月D日 HH:mm:ss"))+" ")]}},{key:"cell(is_paid)",fn:function(e){return[s("p",{directives:[{name:"show",rawName:"v-show",value:e.item.is_paid,expression:"data.item.is_paid"}],staticClass:"text-success"},[t._v(" 已付款 ")]),s("p",{directives:[{name:"show",rawName:"v-show",value:!e.item.is_paid,expression:"!data.item.is_paid"}],staticClass:"text-danger"},[t._v(" 尚未付款 ")])]}},{key:"cell(actions)",fn:function(e){return[s("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(s){return t.showEditOrder(!1,e.item)}}},[t._v(" 編輯 ")])]}}],null,!1,3245883790)}),s("b-pagination-default",{attrs:{pagination:t.pagination},on:{paginate:t.getOrders}})],1)},dt=[],pt={name:"TheDashboardOrders",data(){return{fields:[{key:"create_at",label:"購買時間"},{key:"user",label:"顧客資訊"},{key:"products",label:"購買款項"},{key:"total",label:"應付金額"},{key:"paid_date",label:"付款日期"},{key:"is_paid",label:"是否付款"},{key:"actions",label:"編輯"}],isNew:!1,orders:[],pagination:{},tempOrder:{create_at:null,is_paid:!1,message:"",payment_method:"",products:[],total:null,user:{}}}},computed:{isLoading(){return this.$store.getters.isLoading}},mounted(){this.getOrders()},methods:{showEditOrder(t,e){t?(this.tempOrder={},this.isNew=!0):(this.tempOrder=Object.assign({},e),this.isNew=!1),this.$refs["edit-order-modal"].show()},cancerEditOrder(){this.$refs["edit-order-modal"].hide()},async getOrders(t=1){try{const e=await D(t);if(!e.data.success)return;this.orders=e.data.orders,this.pagination=e.data.pagination}catch(e){console.log(e)}},async updateOrder(){try{let t="https://vue-course-api.hexschool.io/api/henli/admin/order",e="post";this.isNew||(t=`https://vue-course-api.hexschool.io/api/henli/admin/product/${this.tempOrder.id}`,e="put");const s=await this.axios[e](t,{data:this.tempOrder});s.data.success?(this.$refs["edit-order-modal"].hide(),this.getOrders(),this.$store.dispatch("alert/setMsgsAlert",this._$alert(s.data.message))):(this.$refs["edit-order-modal"].hide(),this.getOrders(),this.$store.dispatch("alert/setMsgsAlert",this._$alert(s.data.message,"danger")))}catch(t){console.log(t)}}}},mt=pt,ht=Object(u["a"])(mt,ut,dt,!1,null,null,null),ft=ht.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{attrs:{id:"views-thedashboard_coupons",fluid:""}},[t.isLoading?t._e():s("b-button",{staticClass:"m-3 float-right",attrs:{id:"show-edit-coupons"},on:{click:function(e){return t.showEditCoupon(!0)}}},[t._v(" 建立優惠券 ")]),s("b-modal",{ref:"edit-coupon-modal",attrs:{size:"lg",title:"BootstrapVue"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[s("div",{staticClass:"w-100"},[s("b-button",{staticClass:"float-right",attrs:{size:"md",variant:"primary"},on:{click:t.updateCoupon}},[t._v(" 確認 ")]),s("b-button",{staticClass:"mr-1 float-right",attrs:{size:"md",variant:"danger"},on:{click:t.cancerEditCoupon}},[t._v(" 取消 ")])],1)]},proxy:!0}])},[s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"2"}},[s("label",{attrs:{for:"input-coupon-title"}},[t._v("優惠券名稱")])]),s("b-col",{attrs:{sm:"10"}},[s("b-form-input",{attrs:{id:"input-coupon-title",placeholder:"輸入優惠券名稱",size:"sm"},model:{value:t.tempCoupon.title,callback:function(e){t.$set(t.tempCoupon,"title",e)},expression:"tempCoupon.title"}})],1)],1),s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"2"}},[s("label",{attrs:{for:"input-coupon-percent"}},[t._v("折扣百分比")])]),s("b-col",{attrs:{sm:"10"}},[s("b-form-input",{attrs:{id:"input-coupon-percent",placeholder:"輸入折扣百分比",size:"sm"},model:{value:t.tempCoupon.percent,callback:function(e){t.$set(t.tempCoupon,"percent",e)},expression:"tempCoupon.percent"}})],1)],1),s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"2"}},[s("label",{attrs:{for:"input-coupon-duedate"}},[t._v("到期日")])]),s("b-col",{attrs:{sm:"10"}},[s("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"input-coupon-duedate"},model:{value:t.tempCoupon.due_date,callback:function(e){t.$set(t.tempCoupon,"due_date",e)},expression:"tempCoupon.due_date"}})],1)],1),s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"2"}},[s("label",{attrs:{for:"input-coupon-code"}},[t._v("優惠碼")])]),s("b-col",{attrs:{sm:"10"}},[s("b-form-input",{attrs:{id:"input-coupon-code",placeholder:"輸入優惠碼",size:"sm"},model:{value:t.tempCoupon.code,callback:function(e){t.$set(t.tempCoupon,"code",e)},expression:"tempCoupon.code"}})],1)],1),s("b-row",{staticClass:"my-1"},[s("b-col",{attrs:{sm:"2"}},[s("label",{attrs:{for:"input-coupon-isenabled"}},[t._v("是否啟用")])]),s("b-col",{attrs:{sm:"10"}},[s("b-form-radio-group",{attrs:{id:"input-coupon-isenabled",options:t.isEnableOptions,name:"input-coupon-isenabled"},model:{value:t.tempCoupon.is_enabled,callback:function(e){t.$set(t.tempCoupon,"is_enabled",e)},expression:"tempCoupon.is_enabled"}})],1)],1)],1),t.isLoading?s("v-skeleton-loader",{staticClass:"mt-5",attrs:{type:"table"}}):t._e(),t.isLoading?t._e():s("b-table",{attrs:{items:t.coupons,fields:t.fields,responsive:"",small:"",striped:"",stacked:"md"},scopedSlots:t._u([{key:"cell(is_enabled)",fn:function(e){return[s("p",{directives:[{name:"show",rawName:"v-show",value:e.item.is_enabled,expression:"data.item.is_enabled"}],staticClass:"text-success"},[t._v(" 是 ")]),s("p",{directives:[{name:"show",rawName:"v-show",value:!e.item.is_enabled,expression:"!data.item.is_enabled"}],staticClass:"text-danger"},[t._v(" 否 ")])]}},{key:"cell(actions)",fn:function(e){return[s("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(s){return t.showEditCoupon(!1,e.item)}}},[t._v(" 編輯 ")]),s("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(s){return t.deleteCoupon(e.item)}}},[t._v(" 刪除 ")])]}}],null,!1,1954699601)}),t.isLoading?t._e():s("b-pagination-default",{attrs:{pagination:t.pagination},on:{paginate:t.getCoupons}})],1)},vt=[],gt={name:"TheDashboardCoupons",data(){return{coupons:[],fields:[{key:"title",label:"名稱"},{key:"percent",label:"折扣百分比"},{key:"due_date",label:"到期日"},{key:"is_enabled",label:"是否啟用"},{key:"actions",label:"編輯"}],file:null,isEnableOptions:[{text:"是",value:1},{text:"否",value:0}],isNew:!1,pagination:{},tempCoupon:{title:"",percent:null,due_date:null,is_enabled:1}}},computed:{isLoading(){return this.$store.getters.isLoading}},mounted(){this.getCoupons()},methods:{showEditCoupon(t,e){t?(this.tempCoupon={},this.isNew=!0):(this.tempCoupon=Object.assign({},e),this.isNew=!1),this.$refs["edit-coupon-modal"].show()},cancerEditCoupon(){this.$refs["edit-coupon-modal"].hide()},async deleteCoupon(t){try{const e=await M(t);if(!e.data.success)return;this.getCoupons(),this.$store.dispatch("alert/setMsgsAlert",this._$alert(e.data.message,"danger"))}catch(e){console.log(e)}},async updateCoupon(){try{let t="/admin/coupon",e="post";this.isNew||(t=`/admin/coupon/${this.tempCoupon.id}`,e="put");const s=await this.axios[e](t,{data:this.tempCoupon});s.data.success?(this.$refs["edit-coupon-modal"].hide(),this.getCoupons(),this.$store.dispatch("alert/setMsgsAlert",this._$alert(s.data.message))):(this.$refs["edit-coupon-modal"].hide(),this.getCoupons(),this.$store.dispatch("alert/setMsgsAlert",this._$alert(s.data.message,"warning")))}catch(t){console.log(t)}},async getCoupons(t=1){try{const e=await j(t);if(!e.data.success)return;this.coupons=e.data.coupons,this.pagination=e.data.pagination}catch(e){console.log(e)}}}},_t=gt,xt=Object(u["a"])(_t,bt,vt,!1,null,null,null),Ct=xt.exports,yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"views-thecustomer"}},[s("the-customer-navbar"),s("hr",{staticClass:"m-1"}),s("base-carousel",{directives:[{name:"show",rawName:"v-show",value:"/"===t.$route.path,expression:"$route.path === '/'"}],attrs:{"auto-play":t.carouselAutoPlay,items:t.carouselItems}}),s("b-container",[s("router-view",{key:t.$route.path})],1),s("hr"),s("the-customer-footer")],1)},wt=[],$t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"components-base_carousel"}},[s("div",{staticClass:"carousel-container"},[s("div",{staticClass:"carousel-item-left"}),s("div",{staticClass:"carousel-item-middle"},[s("ul",t._l(t.showItems,(function(t,e){return s("li",{key:e,staticClass:"item",style:t.imgStyle},[s("img",{attrs:{src:t.imgUrl}}),s("div",{staticClass:"img-content"},[s("base-carousel-body",{attrs:{item:t}})],1)])})),0)]),s("div",{staticClass:"carousel-item-right"}),s("div",{staticClass:"prev-btn",on:{click:function(e){return t.goPrev(1)}}},[s("a",{attrs:{href:"#"}},[t._v("❮")])]),s("div",{staticClass:"next-btn",on:{click:function(e){return t.goNext(1)}}},[s("a",{attrs:{href:"#"}},[t._v("❯")])])]),s("div",{staticClass:"counter-group"},t._l(t.items,(function(t,e){return s("span",{key:e,staticClass:"dot",class:[0===t.position?"active":""]})})),0)])},Tt=[],kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.item.content?s("div",{staticClass:"d-flex flex-column",attrs:{id:"components-base_carousel_body"}},[t.item.content.header?s("h1",{class:t.item.content.header.class},[t._v(" "+t._s(t.item.content.header.text)+" ")]):t._e(),t.item.content.main?s("p",{class:t.item.content.main.class},[t._v(" "+t._s(t.item.content.main.text)+" ")]):t._e(),t.item.content.button?s("div",{class:t.item.content.button[0].class},[s("b-button",{attrs:{variant:t.item.content.button[0].variant}},[t._v(" "+t._s(t.item.content.button[0].text)+" ")])],1):t._e()]):t._e()},St=[],Pt={name:"BaseCarouselBody",props:{item:{type:Object}}},Ot=Pt,Et=(s("baa7"),Object(u["a"])(Ot,kt,St,!1,null,null,null)),Lt=Et.exports,At={name:"BaseCarousel",props:{autoPlay:{type:Boolean,default:!0},interval:{type:Number||String,default:5e3},items:{type:Array}},components:{BaseCarouselBody:Lt},data(){return{endPosition:1232,currentSlider:1,propsItems:this.items}},computed:{showItems(){return this.propsItems.map((t,e)=>0===t.position?{content:t.content,id:e,imgStyle:`transform:translate3d(${this.propsItems[e].position}px, 0px, 0px);transition:transform 1s;opacity:1`,imgUrl:this.propsItems[e].url}:-616===t.position||616===t.position?{content:t.content,id:e,imgStyle:`transform:translate3d(${this.propsItems[e].position}px, 0px, 0px);transition: all ease 1s`,imgUrl:this.propsItems[e].url}:{content:t.content,id:e,imgStyle:`transform:translate3d(${this.propsItems[e].position}px, 0px, 0px);opacity:.2;z-index:-10;transition: all ease 1s`,imgUrl:this.propsItems[e].url})}},created(){this.playCarousel(this.interval)},methods:{goNext(){this.propsItems=this.propsItems.map(t=>-616===t.position?(t.position=this.endPosition,t):(t.position=t.position-616,t))},goPrev(){this.propsItems=this.propsItems.map(t=>t.position===this.endPosition?(t.position=-616,t):(t.position=t.position+616,t))},playCarousel(t){this.autoPlay&&window.setInterval(()=>{this.goNext()},t)}}},It=At,zt=Object(u["a"])(It,$t,Tt,!1,null,null,null),Nt=zt.exports,Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"views-thecustomer_navbar"}},[s("base-navbar",{directives:[{name:"show",rawName:"v-show",value:"/"===t.$route.path||"TheCustomerContentProductDetail"===t.$route.name,expression:"$route.path === '/' || $route.name === 'TheCustomerContentProductDetail'"}],attrs:{"navbar-href":"/","navbar-title":"Orchids 市集"}},[s("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),s("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[s("b-navbar-nav",{staticClass:"ml-auto"},[s("b-dropdown",{attrs:{size:"sm",variant:"link","toggle-class":"text-decoration-none","no-caret":""},scopedSlots:t._u([{key:"button-content",fn:function(){return[s("account-circle-outline",{staticClass:"text-secondary",attrs:{id:"account-circle-outline",href:"#"}}),s("b-tooltip",{attrs:{target:"account-circle-outline",variant:"secondary"}},[t._v(" 管理員 ")])]},proxy:!0}])},[s("router-link",{attrs:{tag:"b-dropdown-item",to:"/admin/products"}},[t._v(" 產品列表 ")]),s("router-link",{attrs:{tag:"b-dropdown-item",to:"/admin/orders"}},[t._v(" 訂單列表 ")]),s("router-link",{attrs:{tag:"b-dropdown-item",to:"/admin/coopons"}},[t._v(" 優惠券 ")])],1),s("b-nav-item",[s("heart-outline",{staticClass:"text-secondary",attrs:{id:"heart-outline",href:"#"},on:{click:t.goToFavor}}),s("b-tooltip",{attrs:{target:"heart-outline",variant:"secondary"}},[t._v(" 願望清單 ")])],1),s("b-nav-item",[s("b-img",{attrs:{id:"coupon-img",height:"24",src:"https://image.flaticon.com/icons/svg/2527/2527719.svg",width:"24"},on:{click:t.goToCoupon}}),s("b-tooltip",{staticClass:"mt-1",attrs:{target:"coupon-img",variant:"secondary"}},[t._v(" 優惠券 ")])],1),s("b-nav-item",{attrs:{id:"show-edit-product",href:"#"},on:{click:t.showCarts}},[s("cart-outline-icon",{staticClass:"text-secondary",attrs:{id:"cart-outline-icon"}}),s("b-tooltip",{attrs:{target:"cart-outline-icon",variant:"secondary"}},[t._v(" 購物車 ")]),t.cartsLength?s("b-badge",{attrs:{href:"#",variant:"danger"}},[t._v(" "+t._s(t.cartsLength)+" ")]):t._e()],1)],1)],1),s("b-modal",{ref:"show-cart-modal",attrs:{size:"xs",title:"購物車"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[s("div",{directives:[{name:"show",rawName:"v-show",value:t.carts.length,expression:"carts.length"}],staticClass:"w-100"},[s("span",{staticClass:"mr-2"},[t._v("總計："+t._s(t.cartsTotal.total))]),s("span",{staticClass:"text-danger h5"},[t._v("折扣價："+t._s(t.cartsTotal.final_total))]),s("b-button",{staticClass:"float-right",attrs:{size:"sm",variant:"danger"},on:{click:t.goToCustomerCart}},[t._v(" 到購物車 ")])],1)]},proxy:!0}])},[s("b-card",[s("h5",{directives:[{name:"show",rawName:"v-show",value:!t.carts.length,expression:"!carts.length"}],staticClass:"text-center"},[t._v(" 你的購物車沒有東西呢 ")]),s("b-table-simple",{directives:[{name:"show",rawName:"v-show",value:t.carts.length,expression:"carts.length"}],attrs:{"caption-top":"",hover:"",outlined:"",responsive:"",small:""}},[s("b-thead",{attrs:{"head-variant":"light"}},[s("b-tr",[s("b-th",[s("span",{staticClass:"ml-2"},[t._v("品名")])]),s("b-th",[t._v("數量")]),s("b-th",{staticClass:"text-right",attrs:{colspan:"2"}},[s("span",{staticClass:"mr-2"},[t._v("單價")])])],1)],1),s("b-tbody",t._l(t.carts,(function(e){return s("b-tr",{key:e.id},[s("b-td",[s("b-button",{staticClass:"text-danger",attrs:{size:"sm",variant:"link"},on:{click:function(s){return t.removeCart(e.id)}}},[t.status.loadingItem===e.id?s("b-spinner",{attrs:{label:"Spinning",small:"",variant:"danger"}}):s("trash-can-outline")],1),t._v(" "+t._s(e.product.title)+" "),e.coupon?s("span",{staticClass:"m-0 text-danger"},[t._v("(已套用優惠券)")]):t._e()],1),s("b-td",[t._v(t._s(e.qty)+" / "+t._s(e.product.unit))]),s("b-td",{staticClass:"text-right",attrs:{colspan:"2"}},[s("span",{staticClass:"mr-2"},[t._v(t._s(e.final_total))])])],1)})),1)],1)],1)],1)],1),s("base-navbar",{directives:[{name:"show",rawName:"v-show",value:"/favor"===t.$route.path,expression:"$route.path === '/favor'"}],attrs:{"navbar-href":"/favor","navbar-title":"願望清單"}},[s("b-button",{staticClass:"ml-auto text-secondary",attrs:{size:"sm",variant:"link"},on:{click:function(e){return t.$router.push("/customer_carts")}}},[t._v(" 購物車 ")]),s("b-button",{staticClass:"text-secondary",attrs:{size:"sm",variant:"link"},on:{click:function(e){return t.$router.push("/")}}},[t._v(" 回首頁 ")])],1),s("base-navbar",{directives:[{name:"show",rawName:"v-show",value:"/customer_carts"===t.$route.path||"/customer_carts_form"===t.$route.path||"TheCustomerCheckout"===t.$route.name,expression:"$route.path === '/customer_carts' || $route.path === '/customer_carts_form' || $route.name === 'TheCustomerCheckout'"}],attrs:{"navbar-href":"/customer_carts","navbar-title":"購物車"}},[s("b-row",{staticClass:"d-flex align-items-center",attrs:{"no-gutters":""}},[s("b-col",{attrs:{md:"8"}},[s("base-stepper",{attrs:{"steps-props":t.steps}})],1),s("b-col",{staticClass:"text-right",attrs:{md:"4"}},[s("b-button",{staticClass:"text-secondary",attrs:{size:"sm",variant:"link"},on:{click:function(e){return t.$router.push("/favor")}}},[t._v(" 願望清單 ")]),s("b-button",{staticClass:"text-secondary",attrs:{size:"sm",variant:"link"},on:{click:function(e){return t.$router.push("/")}}},[t._v(" 回首頁 ")])],1)],1)],1),s("base-navbar",{directives:[{name:"show",rawName:"v-show",value:"/coupon"===t.$route.path,expression:"$route.path === '/coupon'"}],attrs:{"navbar-href":"/coupon","navbar-title":"優惠券"}},[s("b-button",{staticClass:"ml-auto text-secondary",attrs:{size:"sm",variant:"link"},on:{click:function(e){return t.$router.push("/favor")}}},[t._v(" 願望清單 ")]),s("b-button",{staticClass:"text-secondary",attrs:{size:"sm",variant:"link"},on:{click:function(e){return t.$router.push("/customer_carts")}}},[t._v(" 購物車 ")]),s("b-button",{staticClass:"text-secondary",attrs:{size:"sm",variant:"link"},on:{click:function(e){return t.$router.push("/")}}},[t._v(" 回首頁 ")])],1)],1)},jt=[],Mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"views-thecustomer_navbar"}},[s("b-navbar",{attrs:{toggleable:"lg",type:"light",variant:"fade"}},[s("b-button",{staticClass:"d-flex align-items-center justify-content-center",attrs:{variant:"link"},on:{click:function(e){return t.$router.push(t.navbarHref)}}},[s("img",{staticClass:"d-inline-block align-top mr-2",attrs:{alt:"orchids",height:"40px",src:"https://image.flaticon.com/icons/svg/898/898143.svg",width:"40px"}}),s("span",{staticClass:"nav-title text-primary"},[t._v(t._s(t.navbarTitle))])]),t._t("default")],2)],1)},Ft=[],Rt={name:"BaseNavbar",props:{navbarTitle:{type:String},navbarHref:{type:String}}},Ut=Rt,Bt=Object(u["a"])(Ut,Mt,Ft,!1,null,null,null),qt=Bt.exports,Gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",{staticClass:"base-stepper d-flex justify-content-between align-items-center mx-3 ",attrs:{id:"components-base_stepper"}},[s("b-col",{staticClass:"ml-2 pr-1",attrs:{md:"auto"}},[!1===t.stepsProps[0].finished?s("numeric-1-circle"):s("check-circle",{staticClass:"text-danger"})],1),s("b-col",{staticClass:"text-left px-0",class:{"text-danger":t.stepsProps[0].finished},attrs:{md:"auto"}},[t._v(" "+t._s(t.stepsProps[0].text)+" ")]),s("b-col",[s("hr")]),s("b-col",{staticClass:"px-1",attrs:{md:"auto"}},[t.stepsProps[1].finished?s("check-circle",{staticClass:"text-danger"}):s("numeric-2-circle")],1),s("b-col",{staticClass:"text-left px-0",class:{"text-danger":t.stepsProps[1].finished},attrs:{md:"auto"}},[t._v(" "+t._s(t.stepsProps[1].text)+" ")]),s("b-col",[s("hr")]),s("b-col",{staticClass:"px-1",attrs:{md:"auto"}},[t.stepsProps[2].finished?s("check-circle",{staticClass:"text-danger"}):s("numeric-3-circle")],1),s("b-col",{staticClass:"text-left px-0",class:{"text-danger":t.stepsProps[2].finished},attrs:{md:"auto"}},[t._v(" "+t._s(t.stepsProps[2].text)+" ")])],1)},Ht=[],Vt={name:"BaseStepper",props:{stepsProps:{type:Array,default:()=>[{text:"購物車內容",finished:!1},{text:"訂購人資訊",finished:!1},{text:"確認付款",finished:!1}]}}},Jt=Vt,Yt=Object(u["a"])(Jt,Gt,Ht,!1,null,null,null),Qt=Yt.exports,Wt={name:"TheCustomerNavbar",components:{BaseNavbar:qt,BaseStepper:Qt},data(){return{stepsData:[{text:"購物車內容",finished:!1},{text:"訂購人資訊",finished:!1},{text:"確認付款",finished:!1}],cardfields:[{key:"action",label:""},{key:"title",label:"品名"},{key:"qty",label:"數量"},{key:"price",label:"單價"}]}},computed:{carts(){return this.$store.state.customer.carts},cartsLength(){return this.$store.state.customer.carts.length},cartsTotal(){return this.$store.state.customer.cartsTotal},isPaid(){return this.$store.state.customer.order.is_paid},status:{get(){return this.$store.state.customer.status},set(t){this.$store.commit("customer/SET_STATUS_LOADINGITEM",t)}},steps(){return"TheCustomerShoppingCartContent"===this.$route.name?this.stepsData.map(t=>(t.finished=!1,t)):"TheCustomerShoppingCartForm"===this.$route.name?this.stepsData.map(t=>"購物車內容"===t.text?(t.finished=!0,t):t):"TheCustomerCheckout"!==this.$route.name||this.isPaid?this.stepsData.map(t=>(t.finished=!0,t)):this.stepsData.map(t=>"確認付款"!==t.text?(t.finished=!0,t):t)}},mounted(){this.$store.dispatch("customer/getCart")},methods:{async removeCart(t){try{this.$store.commit("customer/SET_STATUS_LOADINGITEM",t);let e=await B(t);if(!e.data.success)return;if(e=await this.$store.dispatch("customer/getCart"),!e.status)return;this.$store.commit("customer/SET_STATUS_LOADINGITEM",""),this.$store.dispatch("alert/setMsgsAlert",this._$alert("已刪除","danger"))}catch(e){console.log(e)}},showCarts(){this.$refs["show-cart-modal"].show()},goToCustomerCart(){this.$router.push("/customer_carts"),window.setTimeout(()=>{this.$refs["show-cart-modal"].hide()},200)},goToCoupon(){this.$router.push("/coupon")},goToFavor(){this.$router.push("/favor")}}},Zt=Wt,Kt=Object(u["a"])(Zt,Dt,jt,!1,null,null,null),Xt=Kt.exports,te=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"views-thecustomer_footer"}},[s("b-row",[s("b-col",{staticClass:"d-flex\n      flex-column pl-5",attrs:{md:"3"}},[s("b",[t._v("商品分類")]),s("a",{attrs:{href:"#"}},[t._v("原生蘭")]),s("a",{attrs:{href:"#"}},[t._v("春天開花")]),s("a",{attrs:{href:"#"}},[t._v("夏天開花")]),s("a",{attrs:{href:"#"}},[t._v("秋天開花")]),s("a",{attrs:{href:"#"}},[t._v("冬天開花")])]),s("b-col",{staticClass:"d-flex\n      flex-column pl-5",attrs:{md:"3"}},[s("b",[t._v("問與答")]),s("a",{attrs:{href:"#"}},[t._v("最新公告")]),s("a",{attrs:{href:"#"}},[t._v("新手須知")]),s("a",{attrs:{href:"#"}},[t._v("服務條款")]),s("a",{attrs:{href:"#"}},[t._v("退貨政策")])]),s("b-col",{staticClass:"d-flex\n      flex-column pl-5",attrs:{md:"3"}},[s("b",[t._v("關於 Orchids 市集")]),s("a",{attrs:{href:"#"}},[t._v("關於原生蘭")]),s("a",{attrs:{href:"#"}},[t._v("蘭園資訊")])]),s("b-col",{staticClass:"d-flex\n      flex-column pl-5",attrs:{md:"3"}},[s("b",[t._v("追蹤 Orchids")]),s("facebook"),s("instagram"),s("youtube")],1)],1),s("hr",{staticClass:"my-2"}),s("b-row",[s("b-col",{staticClass:"d-flex justify-content-start align-items-center pl-5",attrs:{md:"5"}},[s("b-img",{staticClass:"mr-3 ",attrs:{alt:"orchids",height:"40px",src:"https://image.flaticon.com/icons/svg/898/898143.svg",width:"40px"}}),s("h5",{staticClass:"mb-0"},[t._v(" Orchids 蘭花購物網 ")])],1),s("b-col",{staticClass:"d-flex justify-content-end align-items-center"},[s("span",{staticClass:"mr-3"},[t._v("本網站僅供作業練習用")])])],1)],1)},ee=[],se={name:"TheCustomerFooter"},ae=se,re=Object(u["a"])(ae,te,ee,!1,null,null,null),oe=re.exports,ie={name:"TheCustomer",components:{BaseCarousel:Nt,TheCustomerNavbar:Xt,TheCustomerFooter:oe},data(){return{carouselItems:[{actived:!1,content:{header:{text:"4/1 - 4/15 蘭園開放參觀",class:["text-right","text-danger"]},main:{text:"門票：大人 150，兒童免費",class:["mt-2","text-danger","h5","text-right"]},button:[{text:"立即索取",class:["ml-auto"],variant:"danger",url:""}]},position:-616,url:"https://images.unsplash.com/photo-1489919282651-df73812beffb?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60"},{actived:!0,content:{main:{text:"幽蘭生前庭，含熏待清風。清風脫然至，見別蕭艾中。",class:["text-center","h5","text-light","mt-3"]}},position:0,url:"https://images.unsplash.com/photo-1514092379092-21dfee9d0b93?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1052&q=80"},{actived:!1,content:{header:{text:"原生之美",class:["text-center","text-primary"]},main:{text:"各色原生蘭瓶苗販售中，稀有品種少量釋出",class:["text-primary","text-center","h5"]}},position:616,url:"https://images.unsplash.com/photo-1542407242725-7d7f3d865665?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60"},{actived:!1,content:{header:{text:"新手種植套件組",class:["text-gray","text-right"]},main:{text:"附盆器、水草、肥料，讓種植一次到位",class:["text-gray","text-right","h5"]},button:[{text:"點擊索取",class:["ml-auto"],variant:"gray",url:""}]},position:1232,url:"https://images.unsplash.com/photo-1536505935294-3acc42ccd0b2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60"}],carouselAutoPlay:!0}},mounted(){this.$store.dispatch("customer/getProductsAll")}},ne=ie,le=Object(u["a"])(ne,yt,wt,!1,null,null,null),ce=le.exports,ue=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"views-thecustomer_checkout"}},[s("b-card",{staticClass:"my-4 justify-content-center"},[s("b-form",{on:{submit:t.payOrder}},[s("b-row",[s("b-col",[s("b-table-simple",{attrs:{"caption-top":"",hover:"",outlined:"",responsive:"",small:""}},[s("b-thead",{attrs:{"head-variant":"light"}},[s("b-tr",[s("b-th",[t._v("品名")]),s("b-th",[t._v("數量")]),s("b-th",{staticClass:"text-right mr-3",attrs:{colspan:"2"}},[t._v(" 單價 ")]),s("b-th")],1)],1),s("b-tbody",t._l(t.order.products,(function(e){return s("b-tr",{key:e.id},[s("b-td",[t._v(t._s(e.product.title))]),s("b-td",[t._v(t._s(e.qty)+" / "+t._s(e.product.unit))]),s("b-td",{staticClass:"text-right mr-3",attrs:{colspan:"2"}},[t._v(" "+t._s(e.final_total)+" ")]),s("b-td")],1)})),1),s("b-tfoot",[s("b-tr",[s("b-td",{attrs:{colspan:"2"}},[t._v(" 總計： ")]),s("b-td",{staticClass:"text-right mr-3",attrs:{colspan:"2"}},[t._v(" "+t._s(t.order.total)+" ")]),s("b-td")],1)],1)],1)],1),s("b-col",[s("b-table-simple",{attrs:{"caption-top":"",hover:"",outlined:"",responsive:"",small:""}},[s("b-thead",{attrs:{"head-variant":"light"}},[s("b-tr",[s("b-th",{attrs:{colspan:"2"}},[t._v(" 收件人資訊 ")])],1)],1),s("b-tbody",[s("b-tr",[s("b-th",[t._v("Email")]),s("b-td",[t._v(t._s(t.order.user.email))])],1),s("b-tr",[s("b-th",[t._v("姓名")]),s("b-td",[t._v(t._s(t.order.user.name))])],1),s("b-tr",[s("b-th",[t._v("收件人電話")]),s("b-td",[t._v(t._s(t.order.user.tel))])],1),s("b-tr",[s("b-th",[t._v("收件人地址")]),s("b-td",[t._v(t._s(t.order.user.address))])],1),s("b-tr",[s("b-th",[t._v("付款狀態")]),s("b-td",[t.order.is_paid?s("span",{staticClass:"text-success"},[t._v("付款完成")]):s("span",[t._v("尚未付款")])])],1)],1)],1)],1)],1),!1===t.order.is_paid?s("b-button",{staticClass:"float-right",attrs:{size:"sm",variant:"outline-danger"},on:{click:t.payOrder}},[t._v(" 確認付款去 ")]):t._e()],1)],1)],1)},de=[],pe={name:"TheDashboardCustomerCheckout",data(){return{order:{user:{}},orderId:""}},mounted(){this.getOrder()},methods:{async getOrder(){try{this.orderId=this.$route.params.orderId;const t=await F(this.orderId);return this.order=t.data.order,this.$store.commit("customer/SET_ORDER",this.order),this.order}catch(t){console.log(t)}},async payOrder(){try{const t=await R(this.orderId);if(!t)return;const e=await this.$store.dispatch("alert/setMsgsAlert",this._$alert(t.data.message,"warning"));if(!e.status)return;this.getOrder()}catch(t){console.log(t)}}}},me=pe,he=Object(u["a"])(me,ue,de,!1,null,null,null),fe=he.exports,be=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"views-thecustomer_content"}},[s("b-row",[s("b-col",{attrs:{md:"2"}},[s("base-sidebar",{attrs:{categories:t.categories,"price-radios-options":t.priceRadiosOptions,"price-radios-selected":t.priceRadiosSelected,"sort-title":t.sortTitle},on:{"filter-handler":t.filterHandler,"remove-conditions":t.removeConditions}})],1),t.isLoading?t._e():s("b-col",{attrs:{md:"10"}},[s("div",{staticClass:"d-flex justify-content-between align-items-center"},[s("h4",{directives:[{name:"show",rawName:"v-show",value:"全部"===t.sortTitle,expression:"sortTitle === '全部'"}]},[t._v(" 全部 ")]),s("h4",{directives:[{name:"show",rawName:"v-show",value:"全部"!==t.sortTitle,expression:"sortTitle !== '全部'"}]},[t._v(" "+t._s(t.sortTitle)+" ")]),s("b-form-select",{staticClass:"sort-form",attrs:{options:t.sortOptions,size:"sm"},on:{change:function(e){return t.sortByPrice(t.sortSelected)}},model:{value:t.sortSelected,callback:function(e){t.sortSelected=e},expression:"sortSelected"}})],1),t.isLoading?s("b-row",t._l(18,(function(t){return s("b-col",{key:t,attrs:{cols:"4",sm:"3",lg:"2"}},[s("v-skeleton-loader",{attrs:{type:"card"}})],1)})),1):t._e(),t.isLoading?t._e():s("b-row",t._l(t.filterPageProducts,(function(e){return s("b-col",{key:e.id,staticClass:"p-0",attrs:{cols:"4",sm:"3",lg:"2"}},[s("base-card-products",{staticClass:"base-card",attrs:{"favor-list":t.favorList,item:e,status:t.status},on:{"add-to-cart":t.addToCart,"get-product":t.getProduct,"go-to-product-detail":t.goToProductDetail,"go-to-shopping-cart":t.goToShoppingCart,"set-favor-title":t.setFavorItem}})],1)})),1),t.filterProducts.length?t._e():s("div",[s("base-card-empty",{attrs:{"card-text":"目前還沒有符合的商品喔!"}})],1),s("b-modal",{ref:"show-product-modal",attrs:{title:t.product.title,size:"md"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[s("div",{staticClass:"w-100"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.product.num,expression:"product.num"}],staticClass:"float-left"},[t._v(" 小記"+t._s(t.product.price*t.product.num)+"元 ")]),s("b-button",{staticClass:"float-right",attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.addToCart(t.product.id,t.product.num)}}},[t.status.loadingItem===t.product.id?s("b-spinner",{staticClass:"mr-1",attrs:{label:"Spinning",small:"",variant:"secondary"}}):t._e(),t._v(" 加到購物車 ")],1),s("b-button",{staticClass:"float-right mr-2",attrs:{size:"sm",variant:"outline-secondary"},on:{click:function(e){return t.goToProductDetail(t.product.id)}}},[t._v(" 查看更多 ")])],1)]},proxy:!0}],null,!1,3554651128)},[s("b-card",{staticClass:"card-img-top-modal",attrs:{"img-src":t.product.imageUrl,"img-alt":t.product.title,title:t.product.title,"img-height":"300px","img-top":""}},[s("b-card-text",[t._v(" "+t._s(t.product.description)+" ")]),s("b-card-text",[s("del",[t._v("原價"+t._s(t.product.origin_price)+"元")])]),s("b-card-text",[t._v(" 現在只要"+t._s(t.product.price)+"元 ")]),s("b-form-select",{staticClass:"mb-3",attrs:{options:t.cartAmountOptions},model:{value:t.product.num,callback:function(e){t.$set(t.product,"num",e)},expression:"product.num"}})],1)],1)],1),s("b-col",{attrs:{md:"12"}},[s("base-pagination-products",{staticClass:"float-right",attrs:{"current-page":t.currentPage,"per-page":t.perPage,rows:t.rows},on:{"get-current-page":t.getCurrentPage}})],1)],1)],1)},ve=[],ge=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-3",attrs:{id:"components-base_paginationproducts"}},[s("b-pagination",{attrs:{"total-rows":t.rows,pills:""},on:{input:t.input,change:t.change},model:{value:t.propCurrentPage,callback:function(e){t.propCurrentPage=e},expression:"propCurrentPage"}})],1)},_e=[],xe={name:"BasePaginationProducts",props:{rows:{type:Number,default:1},perPage:{type:Number,default:12},currentPage:{type:Number,default:1}},data(){return{propCurrentPage:this.currentPage}},methods:{input(t){this.$emit("get-current-page",t)},change(t){}}},Ce=xe,ye=(s("3348"),Object(u["a"])(Ce,ge,_e,!1,null,null,null)),we=ye.exports,$e=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"components-base_sidebar"}},[t._m(0),s("b-list-group",t._l(t.categories,(function(e){return s("b-list-group-item",{key:e,staticClass:"p-1",class:{active:t.sortTitle===e},attrs:{button:""},on:{click:function(s){return t.filterHandler({type:"category",value:e})}}},[s("span",{staticClass:"ml-2"},[t._v(t._s(e))])])})),1),s("hr"),t._m(1),s("b-list-group",[s("b-list-group-item",[s("b-form-group",t._l(t.priceRadiosOptions,(function(e){return s("b-form-radio",{key:e.value,staticClass:"m-0 pl-3",attrs:{value:e.value,name:"some-radios"},on:{change:function(s){return t.filterHandler({type:"price",low:e.low,high:e.high})}},model:{value:t.propsPriceRadiosSelected,callback:function(e){t.propsPriceRadiosSelected=e},expression:"propsPriceRadiosSelected"}},[t._v(" "+t._s(e.text)+" ")])})),1)],1)],1),s("b-button",{staticClass:"text-left pl-0 text-danger d-flex justify-content-start align-items-center",attrs:{block:"",variant:"link"},on:{click:t.removeConditions}},[s("close"),s("span",[t._v("清除篩選")])],1)],1)},Te=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-2"},[s("b",[t._v("依種類搜尋")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-2"},[s("b",[t._v("依價格搜尋")])])}],ke={name:"BaseSidebar",data(){return{propsPriceRadiosSelected:this.priceRadiosSelected}},props:{categories:{type:Array,default:()=>(void 0).$store.state.customer.categories},priceRadiosOptions:{type:Array,default:()=>[{text:"NT$300 以下",value:"1",low:0,high:300},{text:"NT$300-500",value:"2",low:300,high:500},{text:"NT$500-1000",value:"3",low:500,high:1e3},{text:"NT$1000-2000",value:"4",low:1e3,high:2e3},{text:"NT$2000-2500",value:"5",low:2e3,high:2500},{text:"NT$2500-5000",value:"6",low:2500,high:5e3},{text:"NT$5000 以上",value:"7",low:5e3,high:1e6}]},priceRadiosSelected:{type:String,default:"1"},sortTitle:{type:String,default:"全部"}},methods:{filterHandler(t){this.$emit("filter-handler",t)},removeConditions(){this.$emit("remove-conditions")}}},Se=ke,Pe=Object(u["a"])(Se,$e,Te,!1,null,null,null),Oe=Pe.exports,Ee={name:"TheCustomerContent",components:{BasePaginationProducts:we,BaseSidebar:Oe},data(){return{cartAmountOptions:[{text:"請選擇數量",value:null},{text:"選購 1 件",value:1},{text:"選購 2 件",value:2},{text:"選購 3 件",value:3},{text:"選購 4 件",value:4},{text:"選購 5 件",value:5},{text:"選購 6 件",value:6},{text:"選購 7 件",value:7},{text:"選購 8 件",value:8},{text:"選購 9 件",value:9},{text:"選購 10 件",value:10}],conditions:{chooses:[],ranges:[]},currentPage:1,favorList:[],perPage:18,priceRadiosOptions:[{text:"NT$300 以下",value:"1",low:0,high:300},{text:"NT$300-500",value:"2",low:300,high:500},{text:"NT$500-1000",value:"3",low:500,high:1e3},{text:"NT$1000-2000",value:"4",low:1e3,high:2e3},{text:"NT$2000-2500",value:"5",low:2e3,high:2500},{text:"NT$2500-5000",value:"6",low:2500,high:5e3},{text:"NT$5000 以上",value:"7",low:5e3,high:1e6}],priceRadiosSelected:"",product:{},showEmptyCardProducts:!1,showEmptyCardFavor:!1,sortSelected:null,sortOptions:[{value:null,text:"價格"},{value:"hign",text:"價格由高至低"},{value:"low",text:"價格由低至高"}]}},computed:{categories(){return this.$store.state.customer.categories},filterProducts:{get(){return this.$store.state.customer.filterProducts},set(t){this.$store.commit("customer/UPDATE_FILTER_PRODUCTS",t)}},filterPageProducts(){const t=(this.currentPage-1)*this.perPage,e=this.currentPage*this.perPage>this.filterProducts?this.filterProducts:this.currentPage*this.perPage;return this.$store.state.customer.filterProducts.slice(t,e)},isLoading(){return this.$store.getters.isLoading},productsAll(){return this.$store.state.customer.productsAll},rows(){return this.filterProducts.length},sortTitle(){return this.$store.state.customer.sortTitle},status:{get(){return this.$store.state.customer.status},set(t){this.$store.commit("customer/SET_STATUS_LOADINGITEM",t)}}},mounted(){this.getFavorTitleList()},methods:{async addToCart(t,e=1){try{const e=await this.$store.dispatch("customer/addToCart",{id:t,qty:1});if(!e.msg)return;this.$refs["show-product-modal"].hide(),this.$store.dispatch("alert/setMsgsAlert",e)}catch(s){console.log(s)}},filterHandler(t){"category"===t.type&&"全部"===t.value?(this.conditions.chooses=[],this.$store.commit("customer/SET_SORT_TITLE",t.value),this.filteredData(this.productsAll)):"category"===t.type&&"全部"!==t.value?(this.conditions.chooses=[],this.conditions.chooses.push(t),this.$store.commit("customer/SET_SORT_TITLE",t.value),this.filteredData(this.productsAll)):"price"===t.type&&(this.conditions.ranges=[],this.conditions.ranges.push(t),this.filteredData(this.productsAll))},filteredData(t){this.$store.commit("customer/UPDATE_FILTER_PRODUCTS",this.$productsFilter.handler(t,this.conditions))},getCurrentPage(t=1){this.currentPage=t},getFavorTitleList(){this.favorList=JSON.parse(localStorage.getItem("favorItem"))||[]},async getProduct(t){try{const e=await U(t);if(!e.data.success)return;e.data.product.num=null,this.product=e.data.product,this.$refs["show-product-modal"].show()}catch(e){console.log(e)}},goToProductDetail(t){this.$router.push({path:`/detail/${t}`}).catch(t=>{console.log(t)})},goToShoppingCart(){this.$router.push("/customer_carts")},removeConditions(){this.conditions={},this.priceRadiosSelected="",this.$store.commit("customer/SET_SORT_TITLE","全部"),this.filteredData(this.productsAll),this.$store.dispatch("alert/setMsgsAlert",this._$alert("已清除篩選"))},setFavorItem(t){const e=()=>{localStorage.setItem("favorItem",JSON.stringify(this.favorList)),this.getFavorTitleList()},s=e=>e===t.title;if(0===this.favorList.length||!1===this.favorList.some(s))this.favorList.push(t.title),e(),this.$store.dispatch("alert/setMsgsAlert",this._$alert("已加入願望清單"));else{const t=this.favorList.findIndex(s);this.favorList.splice(t,1),e(),this.$store.dispatch("alert/setMsgsAlert",this._$alert("已從願望清單移除","warning"))}},sortByPrice(t){"hign"===t?this.$store.commit("customer/SET_FILTER_PRODUCTS_BY_SORT","hign"):"low"===t&&this.$store.commit("customer/SET_FILTER_PRODUCTS_BY_SORT","low")}}},Le=Ee,Ae=Object(u["a"])(Le,be,ve,!1,null,null,null),Ie=Ae.exports,ze=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"views-thecustomer_contentfavor"}},[s("b-row",[s("b-col",{attrs:{md:"1"}}),s("b-col",[s("b-row",t._l(t.favorProducts,(function(e){return s("b-col",{key:e.id,staticClass:"p-0",attrs:{cols:"4",sm:"3",lg:"2"}},[s("base-card-products",{staticClass:"base-card",attrs:{"favor-list":t.favorList,item:e,status:t.status},on:{"add-to-cart":t.addToCart,"get-product":t.getProduct,"go-to-product-detail":t.goToProductDetail,"go-to-shopping-cart":t.goToShoppingCart,"set-favor-title":t.setFavorItem}})],1)})),1)],1),s("b-col",{attrs:{md:"1"}})],1),t.favorProducts.length?t._e():s("div",{staticClass:"d-flex flex-column"},[s("base-card-empty",{staticClass:"mb-3",attrs:{"card-text":"心願清單沒有東西喔！"}},[s("template",{slot:"action"},[s("b-button",{attrs:{size:"sm"},on:{click:function(e){return t.$router.push("/")}}},[t._v(" 到首頁逛逛 ")])],1)],2)],1),s("b-modal",{ref:"show-product-modal",attrs:{title:t.product.title,size:"md"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[s("div",{staticClass:"w-100"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.product.num,expression:"product.num"}],staticClass:"float-left"},[t._v(" 小記"+t._s(t.product.price*t.product.num)+"元 ")]),s("b-button",{staticClass:"float-right",attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.addToCart(t.product.id,t.product.num)}}},[t.status.loadingItem===t.product.id?s("b-spinner",{staticClass:"mr-1",attrs:{label:"Spinning",small:"",variant:"secondary"}}):t._e(),t._v(" 加到購物車 ")],1),s("b-button",{staticClass:"float-right mr-2",attrs:{size:"sm",variant:"outline-secondary"},on:{click:function(e){return t.goToProductDetail(t.product.id)}}},[t._v(" 查看更多 ")])],1)]},proxy:!0}])},[s("b-card",{staticClass:"card-img-top-modal",attrs:{"img-src":t.product.imageUrl,"img-alt":t.product.title,title:t.product.title,"img-height":"300px","img-top":""}},[s("b-card-text",[t._v(" "+t._s(t.product.description)+" ")]),s("b-card-text",[s("del",[t._v("原價"+t._s(t.product.origin_price)+"元")])]),s("b-card-text",[t._v(" 現在只要"+t._s(t.product.price)+"元 ")]),s("b-form-select",{staticClass:"mb-3",attrs:{options:t.cartAmountOptions},model:{value:t.product.num,callback:function(e){t.$set(t.product,"num",e)},expression:"product.num"}})],1)],1)],1)},Ne=[],De={name:"TheCustomerContentFavor",data(){return{cartAmountOptions:[{text:"請選擇數量",value:null},{text:"選購 1 件",value:1},{text:"選購 2 件",value:2},{text:"選購 3 件",value:3},{text:"選購 4 件",value:4},{text:"選購 5 件",value:5},{text:"選購 6 件",value:6},{text:"選購 7 件",value:7},{text:"選購 8 件",value:8},{text:"選購 9 件",value:9},{text:"選購 10 件",value:10}],favorList:[],product:{}}},mounted(){this.getFavorTitleList()},computed:{favorProducts(){const t=(t,e)=>{let s=[];for(let a=0;a<t.length;a++){const r=e.filter(e=>e.title===t[a]);s=s.concat(r)}return s};return t(this.favorList,this.productsAll)},productsAll(){return this.$store.state.customer.productsAll},status:{get(){return this.$store.state.customer.status},set(t){this.$store.commit("customer/SET_STATUS_LOADINGITEM",t)}}},methods:{async addToCart(t,e=1){try{const e=await this.$store.dispatch("customer/addToCart",{id:t,qty:1});if(!e.msg)return;this.$refs["show-product-modal"].hide(),this.$store.dispatch("alert/setMsgsAlert",e)}catch(s){console.log(s)}},async getFavorTitleList(){this.favorList=JSON.parse(localStorage.getItem("favorItem"))||[]},async getProduct(t){try{const e=await U(t);if(!e.data.success)return;e.data.product.num=null,this.product=e.data.product,this.$refs["show-product-modal"].show()}catch(e){console.log(e)}},goToProductDetail(t){this.$router.push({path:`/detail/${t}`}).catch(t=>{console.log(t)})},goToShoppingCart(){this.$router.push("/customer_carts")},setFavorItem(t){const e=()=>{localStorage.setItem("favorItem",JSON.stringify(this.favorList)),this.getFavorTitleList()},s=e=>e===t.title;if(0===this.favorList.length||!1===this.favorList.some(s))this.favorList.push(t.title),e(),this.$store.dispatch("alert/setMsgsAlert",this._$alert("已加入願望清單"));else{const t=this.favorList.findIndex(s);this.favorList.splice(t,1),e(),this.$store.dispatch("alert/setMsgsAlert",this._$alert("已從願望清單移除","warning"))}}}},je=De,Me=Object(u["a"])(je,ze,Ne,!1,null,null,null),Fe=Me.exports,Re=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"views-thecustomer_contentcoupons"}},[t.isLoading?s("b-row",t._l(4,(function(t){return s("b-col",{key:t,attrs:{md:"6",sm:"12"}},[s("v-skeleton-loader",{attrs:{type:"card"}})],1)})),1):t._e(),t.isLoading?t._e():s("b-row",t._l(t.coupons,(function(e){return s("b-col",{key:e.id,attrs:{md:"6",sm:"12"}},[s("b-card",{staticClass:"my-2"},[s("b-row",[s("b-col",{staticClass:"card-coupon-left my-0",attrs:{md:"4","no-gutters":""}},[s("div",{staticClass:"dot-top"}),s("b-card-title",{staticClass:"text-center"},[t._v(" "+t._s(e.title)+" ")]),s("b-card-text",{staticClass:"text-center"},[s("b-button",{staticClass:"btn-left",attrs:{disabled:"",size:"sm",variant:"danger"}},[t._v(" "+t._s(.1*e.percent)+" 折 ")]),s("b-button",{staticClass:"btn-right",attrs:{disabled:"",size:"sm",variant:"outline-danger"}},[t._v(" "+t._s(e.code)+" ")])],1),s("div",{staticClass:"dot-bottom"})],1),s("b-col",{staticClass:"text-center",attrs:{md:"8"}},[s("b-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.code,expression:"item.code",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"text-center mb-3",attrs:{size:"sm",variant:"outline-primary"}},[t._v(" 複製優惠碼 ")]),s("b-card-text",{staticClass:"text-center"},[t._v(" 到期日:"+t._s(e.due_date)+" ")])],1)],1)],1)],1)})),1)],1)},Ue=[],Be={name:"TheCustomerContentCoupon",data(){return{coupons:[]}},computed:{isLoading(){return this.$store.getters.isLoading}},created(){this.getCoupons()},methods:{async getCoupons(t=1){try{const e=await j(t);if(!e.data.success)return;this.coupons=e.data.coupons}catch(e){console.log(e)}},onCopy(t){this.$store.dispatch("alert/setMsgsAlert",this._$alert("已複製優惠碼","warning"))},onError(){console.log("failed")}}},qe=Be,Ge=Object(u["a"])(qe,Re,Ue,!1,null,null,null),He=Ge.exports,Ve=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.product.title?s("div",{attrs:{id:"views-thecustomer_contentproductdetail"}},[t.isLoading?s("v-skeleton-loader",{staticClass:"my-4",attrs:{type:"heading"}}):t._e(),t.isLoading?t._e():s("b-breadcrumb",{staticClass:"mt-3"},[s("b-breadcrumb-item",{attrs:{href:"/"}},[t._v(" 首頁 ")]),s("b-breadcrumb-item",{attrs:{href:"/detail/"+t.$route.params.productId}},[t._v(" "+t._s(t.product.title)+" ")])],1),t.isLoading?s("v-skeleton-loader",{attrs:{type:"card"}}):t._e(),t.isLoading?t._e():s("b-card",{staticClass:"img-left-card my-3",attrs:{"img-src":t.product.imageUrl,"img-alt":t.product.title,"img-height":"350px","img-left":""}},[s("b-card-title",[s("span",{staticClass:"h2 text-secondary"},[t._v(t._s(t.product.title))])]),s("b-card-text",{staticClass:"d-flex justify-content-start align-items-end"},[s("span",{staticClass:"h3 mr-3 text-primary"},[t._v("NT "+t._s(t._f("currency")(t.product.price)))]),s("del",{directives:[{name:"show",rawName:"v-show",value:t.product.price!==t.product.origin_price,expression:"product.price !== product.origin_price"}],staticClass:"h5 text-secondary"},[t._v("NT "+t._s(t._f("currency")(t.product.origin_price)))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.product.origin_price!==t.product.price,expression:"product.origin_price !== product.price"}]},[s("b-button",{staticClass:"coupon-button-left mb-4 py-0",attrs:{disabled:"",size:"sm",variant:"danger"}},[t._v(" "+t._s(t.discounted)+"折 ")]),s("b-button",{staticClass:"coupon-button-right mb-4 py-0",attrs:{disabled:"",size:"sm",variant:"outline-danger"}},[t._v(" 便宜了 "+t._s(t.product.origin_price-t.product.price)+" 元 ")])],1),s("b-form-select",{staticClass:"mb-3",attrs:{options:t.cartAmountOptions},model:{value:t.product.num,callback:function(e){t.$set(t.product,"num",e)},expression:"product.num"}}),s("b-card-text",{directives:[{name:"show",rawName:"v-show",value:t.product.price*t.product.num!==0,expression:"product.price * product.num !== 0"}],staticClass:"h5 float-right my-3 text-secondary"},[t._v(" 小記 NT "+t._s(t._f("currency")(t.product.price*t.product.num))+"元 ")]),s("b-button",{attrs:{block:"","d-flex":"",size:"sm",variant:"danger"},on:{click:function(e){return t.addToCart(t.product.id,t.product.num)}}},[s("cart-outline-icon",{staticClass:"mr-1"}),s("span",[t._v("加入購物車")])],1),s("b-button",{attrs:{block:"",size:"sm",variant:"outline-secondary"},on:{click:function(e){return t.setFavorItem(t.product.title)}}},[-1===t.favorList.indexOf(t.product.title)?s("heart-outline",{staticClass:"mr-1"}):s("heart",{staticClass:"mr-1"}),s("span",[t._v("收藏商品")])],1)],1),t.isLoading?s("v-skeleton-loader",{attrs:{type:"list-item-two-line"}}):t._e(),t.isLoading?t._e():s("b-card",{attrs:{"no-body":""}},[s("b-tabs",{attrs:{card:""}},[s("b-tab",{attrs:{title:"商品描述",active:""}},[s("b-card-text",[t._v(" "+t._s(t.product.description)+" ")]),s("b-card-text",[s("small",{staticClass:"text-danger"},[t._v("更多介紹請看商品內容")])])],1),s("b-tab",{attrs:{title:"商品內容"}},[s("b-card-title",{staticClass:"text-primary"},[t._v(" 品種介紹 ")]),s("b-card-text",[t._v(" "+t._s(t.product.content)+" ")]),s("b-card-title",{staticClass:"text-primary"},[t._v(" 適合介質、土壤 ")]),s("b-card-text",[t._v(" "+t._s(t.product.content)+" ")]),s("b-card-title",{staticClass:"text-primary"},[t._v(" 喜好溫度、濕度及光照 ")]),s("b-card-text",[t._v(" "+t._s(t.product.content)+" ")]),s("b-card-title",{staticClass:"text-primary"},[t._v(" 售後服務 ")]),s("b-card-text",[t._v(" "+t._s(t.product.content)+" ")]),s("b-card-title",{staticClass:"text-primary"},[t._v(" 我們的三大保證 ")]),s("b-card-text",[s("b-list-group",[s("b-list-group-item",{staticClass:"px-0 py-1"},[s("span",{staticClass:"text-danger"},[s("b",[t._v("保證")]),t._v("絕不販售保育物種")])]),s("b-list-group-item",{staticClass:"px-0  py-1"},[s("span",{staticClass:"text-danger"},[s("b",[t._v("保證")]),t._v("商品瑕疵七天內退貨")])]),s("b-list-group-item",{staticClass:"px-0  py-1"},[s("span",{staticClass:"text-danger"},[s("b",[t._v("保證")]),t._v("商品與圖片一模一樣")])])],1)],1),s("b-img",{attrs:{src:t.product.imageUrl,fluid:""}})],1)],1)],1),s("hr"),t.filterDetailProducts.length?s("b-card",{staticClass:"text-left",attrs:{"bg-variant":"light",header:"同類別的其他商品"}},[s("b-row",{attrs:{"no-gutters":""}},t._l(t.filterDetailProducts,(function(e){return s("b-col",{key:e.id,attrs:{cols:"4",sm:"3",lg:"2"}},[s("base-card-products",{attrs:{"favor-list":t.favorList,item:e,status:t.status},on:{"add-to-cart":t.addToCart,"get-product":t.getProductDetail,"go-to-shopping-cart":t.goToShoppingCart,"go-to-product-detail":t.goToProductDetail,"set-favor-title":t.setFavorItem}})],1)})),1)],1):t._e()],1):t._e()},Je=[],Ye={name:"TheCustomerContentProductDetail",data(){return{cartAmountOptions:[{text:"請選擇數量",value:null},{text:"選購 1 件",value:1},{text:"選購 2 件",value:2},{text:"選購 3 件",value:3},{text:"選購 4 件",value:4},{text:"選購 5 件",value:5},{text:"選購 6 件",value:6},{text:"選購 7 件",value:7},{text:"選購 8 件",value:8},{text:"選購 9 件",value:9},{text:"選購 10 件",value:10}],favorList:[],product:{}}},computed:{discounted(){return(this.product.price/this.product.origin_price*10).toFixed(1)},filterDetailProducts(){return this.productsAll.filter(t=>t.category===this.product.category&&t.title!==this.product.title)},isLoading(){return this.$store.getters.isLoading},productsAll(){return this.$store.state.customer.productsAll},status:{get(){return this.$store.state.customer.status},set(t){this.$store.commit("customer/SET_STATUS_LOADINGITEM",t)}}},mounted(){this.getProduct(this.$route.params.productId),this.getFavorTitleList()},methods:{async addToCart(t,e=1){try{const e=await this.$store.dispatch("customer/addToCart",{id:t,qty:1});if(!e.msg)return;this.$store.dispatch("alert/setMsgsAlert",e)}catch(s){console.log(s)}},async getProduct(t){try{const e=await U(t);if(!e.data.success)return;e.data.product.num=null,this.product=e.data.product}catch(e){console.log(e)}},getFavorTitleList(){this.favorList=JSON.parse(localStorage.getItem("favorItem"))||[]},async getProductDetail(t){this.$router.push({path:`/detail/${t}`}),this.getProduct(t)},goToProductDetail(t){this.$router.push({path:`/detail/${t}`})},goToShoppingCart(){this.$router.push("/customer_carts")},setFavorItem(t){"object"===typeof t&&(t.toString(),t=t.title);const e=()=>{localStorage.setItem("favorItem",JSON.stringify(this.favorList)),this.getFavorTitleList()},s=e=>e===t;if(0===this.favorList.length||!1===this.favorList.some(s))this.favorList.push(t),this.$store.dispatch("alert/setMsgsAlert",this._$alert("已加入")),e();else{const t=this.favorList.findIndex(s);this.favorList.splice(t,1),this.$store.dispatch("alert/setMsgsAlert",this._$alert("已移除","warning")),e()}}}},Qe=Ye,We=Object(u["a"])(Qe,Ve,Je,!1,null,null,null),Ze=We.exports,Ke=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"views-theshoppingcart_content"}},[t.carts.length?s("div",{staticClass:"mt-2"},[s("b-table-simple",{attrs:{"caption-top":"",hover:"",outlined:"",responsive:"",small:""}},[s("b-thead",{attrs:{"head-variant":"light"}},[s("b-tr",[s("b-th",[s("span",{staticClass:"ml-2"},[t._v("品名")])]),s("b-th",[t._v("數量")]),s("b-th",{staticClass:"text-right mr-3",attrs:{colspan:"2"}},[s("span",{staticClass:"mr-2"},[t._v("單價")])])],1)],1),s("b-tbody",t._l(t.carts,(function(e){return s("b-tr",{key:e.id},[s("b-td",[s("b-button",{staticClass:"text-danger",attrs:{size:"sm",variant:"link"},on:{click:function(s){return t.removeCart(e.id)}}},[t.status.loadingItem===e.id?s("b-spinner",{attrs:{label:"Spinning",small:"",variant:"danger"}}):s("trash-can-outline")],1),t._v(" "+t._s(e.product.title)+" "),e.coupon?s("span",{staticClass:"m-0 text-success"},[t._v("(已套用優惠券)")]):t._e()],1),s("b-td",[t._v(t._s(e.qty)+" / "+t._s(e.product.unit))]),s("b-td",{staticClass:"text-right mr-3",attrs:{colspan:"2"}},[s("span",{staticClass:"mr-2"},[t._v(t._s(Math.round(e.final_total)))]),e.coupon?s("span",{staticClass:"text-success"},[t._v("(折扣後)")]):t._e()])],1)})),1)],1),s("b-card",[s("b-card-text",{staticClass:"text-right m-0 p-1"},[t._v(" 總計："+t._s(Math.round(t.cartsTotal.total))+" ")]),s("b-card-text",{directives:[{name:"show",rawName:"v-show",value:t.cartsTotal.final_total!==t.cartsTotal.total,expression:"cartsTotal.final_total !== cartsTotal.total"}],staticClass:"card-text-price text-right text-success m-0 p-1"},[t._v(" 折扣價："+t._s(Math.round(t.cartsTotal.final_total))+" ")]),s("b-input-group",[s("b-form-input",{attrs:{placeholder:"請輸入優惠碼",type:"text"},model:{value:t.coupon_code,callback:function(e){t.coupon_code=e},expression:"coupon_code"}}),s("b-input-group-append",[s("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(e){return t.addCouponCode(t.cartsTotal.total,t.coupon_code)}}},[t._v(" 套用優惠碼 ")])],1)],1)],1),s("div",{staticClass:"d-flex justify-content-end"},[s("b-button",{staticClass:"mt-2",attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.$router.push("/customer_carts_form")}}},[t._v(" 下一步 ")])],1)],1):t._e(),t.loading?t._e():s("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"table"}}),!t.carts.length&&t.loading?s("div",[s("base-card-empty",{attrs:{"card-text":"你的購物車沒有東西喔！"}}),s("div",{staticClass:"d-flex justify-content-end"},[s("b-button",{staticClass:"mt-2 mr-2",attrs:{size:"sm",variant:"primary"},on:{click:function(e){return t.$router.push("/")}}},[t._v(" 回首頁 ")]),s("b-button",{staticClass:"mt-2",attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.$router.push("/favor")}}},[t._v(" 心願清單 ")])],1)],1):t._e()],1)},Xe=[],ts=s("7bb1"),es={name:"TheCustomerShoppingCartContent",data(){return{cardfields:[{key:"action",label:""},{key:"title",label:"品名"},{key:"qty",label:"數量"},{key:"price",label:"單價"}],coupon_code:"",loading:!1}},computed:{carts(){return this.$store.state.customer.carts},cartsTotal(){return this.$store.state.customer.cartsTotal},status:{get(){return this.$store.state.customer.status},set(t){this.$store.commit("customer/SET_STATUS_LOADINGITEM",t)}}},mounted(){this.getCart()},methods:{async getCart(){try{this.loading=!1;const t=await this.$store.dispatch("customer/getCart");if(!t.status)return;this.loading=!0,this.carts.length||(this.showEmptyCard=!0)}catch(t){console.log(t)}},async addCouponCode(t,e){try{const s=await this.couponValidate(t,e);if(!s)return;const a={code:this.coupon_code},r=await q({data:a});if(!r.data.success)return void this.$store.dispatch("alert/setMsgsAlert",this._$alert(r.data.message));const o=await this.$store.dispatch("customer/getCart");if(!o.status)return;this.$store.dispatch("alert/setMsgsAlert",this._$alert("已輸入優惠碼"))}catch(s){console.log(s)}},async couponValidate(t,e){try{const s=parseInt(e.replace(/[a-z]/g,""));Object(ts["c"])("coupon_can_use",t=>!!(e&&t>s)||"您的金額不能使用這個優惠券喔");const a=await Object(ts["e"])(t,"coupon_can_use");if(!a.errors.length)return!0;this.$store.dispatch("alert/setMsgsAlert",this._$alert(a.errors[0],"danger"))}catch(s){console.log(s)}},async removeCart(t){try{this.$store.commit("customer/SET_STATUS_LOADINGITEM",t);let e=await B(t);if(!e.data.success)return;if(e=await this.$store.dispatch("customer/getCart"),!e.status)return;this.$store.commit("customer/SET_STATUS_LOADINGITEM",""),this.$store.dispatch("alert/setMsgsAlert",this._$alert("已刪除","danger"))}catch(e){console.log(e)}}}},ss=es,as=Object(u["a"])(ss,Ke,Xe,!1,null,null,null),rs=as.exports,os=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"views-theshoppingcart_form"}},[s("h3",{staticClass:"my-4"},[t._v(" 填寫基本資料 ")]),s("b-card",[s("b-row",[s("b-col",{attrs:{cols:"6"}},[s("validation-observer",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.passes;return[t.show?s("b-form",{on:{submit:function(e){return e.preventDefault(),a(t.createOrder)}}},[s("validation-provider",{attrs:{name:"信箱",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("b-form-group",{attrs:{id:"input-email",label:"信箱","label-for":"input-email"}},[s("b-form-input",{attrs:{id:"input-email",state:t.getValidationState(e),placeholder:"請輸入信箱",required:""},model:{value:t.form.user.email,callback:function(e){t.$set(t.form.user,"email",e)},expression:"form.user.email"}}),s("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)}),s("validation-provider",{attrs:{name:"姓名",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("b-form-group",{attrs:{id:"input-name",label:"收件人姓名","label-for":"input-name"}},[s("b-form-input",{attrs:{id:"input-name",state:t.getValidationState(e),placeholder:"請輸入姓名",required:""},model:{value:t.form.user.name,callback:function(e){t.$set(t.form.user,"name",e)},expression:"form.user.name"}}),s("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)}),s("validation-provider",{attrs:{name:"電話",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("b-form-group",{attrs:{id:"input-tel",label:"收件人電話","label-for":"input-tel"}},[s("b-form-input",{attrs:{id:"input-tel",state:t.getValidationState(e),placeholder:"請輸入電話",required:""},model:{value:t.form.user.phone,callback:function(e){t.$set(t.form.user,"phone",e)},expression:"form.user.phone"}}),s("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)}),s("validation-provider",{attrs:{name:"地址",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("b-form-group",{attrs:{id:"input-address",label:"收件人地址","label-for":"input-address"}},[s("b-form-input",{attrs:{id:"input-address",state:t.getValidationState(e),placeholder:"請輸入地址",required:""},model:{value:t.form.user.address,callback:function(e){t.$set(t.form.user,"address",e)},expression:"form.user.address"}}),s("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)}),s("validation-provider",{attrs:{name:"留言",rules:"max:300"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("b-form-group",{attrs:{id:"input-msgs",label:"留言","label-for":"input-msg"}},[s("b-form-textarea",{attrs:{id:"input-msgs",state:t.getValidationState(e),"max-rows":"6",placeholder:"說點什麼⋯⋯",rows:"3"},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message",e)},expression:"form.message"}}),s("b-form-invalid-feedback",{attrs:{id:"input-1-live-feedback"}},[t._v(" "+t._s(e.errors[0])+" ")])],1)]}}],null,!0)}),s("b-button",{staticClass:"float-right",attrs:{size:"sm",type:"submit",variant:"primary"},on:{click:function(e){return a(t.createOrder)}}},[t._v(" 提交 ")])],1):t._e()]}}])})],1),s("b-col",{staticClass:"d-flex justify-content-center mt-5",attrs:{cols:"6"}},[s("v-svg-form")],1)],1)],1)],1)},is=[],ns=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("svg",{attrs:{id:"Capa_1","enable-background":"new 0 0 512 512",height:"350",viewBox:"0 0 512 512",width:"350",xmlns:"http://www.w3.org/2000/svg"}},[s("g",[s("path",{attrs:{d:"m256 30h-195v482h195 195v-482z",fill:"#2d545e"}}),s("path",{attrs:{d:"m256 30h195v482h-195z",fill:"#12343b"}}),s("path",{attrs:{d:"m316 60-30-30h-30-30l-30 30h-105v422h165 165v-422z",fill:"#f0f7ff"}}),s("path",{attrs:{d:"m421 60h-105l-30-30h-30v452h165z",fill:"#dfe7f4"}}),s("g",{attrs:{fill:"#c7cfe1"}},[s("path",{attrs:{d:"m271 121h120v30h-120z"}}),s("path",{attrs:{d:"m271 181h60v30h-60z"}}),s("path",{attrs:{d:"m271 241h120v30h-120z"}}),s("path",{attrs:{d:"m271 301h60v30h-60z"}}),s("path",{attrs:{d:"m271 361h120v30h-120z"}}),s("path",{attrs:{d:"m271 421h60v30h-60z"}})]),s("path",{attrs:{d:"m211 211h-90v-90h90z",fill:"#12343b"}}),s("path",{attrs:{d:"m211 331h-90v-90h90z",fill:"#12343b"}}),s("path",{attrs:{d:"m211 451h-90v-90h90z",fill:"#12343b"}}),s("path",{attrs:{d:"m151 151h30v30h-30z",fill:"#f0f7ff"}}),s("path",{attrs:{d:"m151 271h30v30h-30z",fill:"#f0f7ff"}}),s("path",{attrs:{d:"m151 391h30v30h-30z",fill:"#f0f7ff"}}),s("path",{attrs:{d:"m256 0h-60v60h60 60v-60z",fill:"#e1b382"}}),s("path",{attrs:{d:"m256 0h60v60h-60z",fill:"#c89666"}})])])])},ls=[],cs={},us=Object(u["a"])(cs,ns,ls,!1,null,null,null),ds=us.exports,ps={name:"TheCustomerShoppingCartForm",components:{VSvgForm:ds},data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},show:!0}},methods:{async createOrder(){try{const t=this.form,e=await G({data:t});if(!e.data.success)return;this.$router.push(`/customer_checkout/${e.data.orderId}`)}catch(t){console.log(t)}},getValidationState({dirty:t,validated:e,valid:s=null}){return t||e?s:null}}},ms=ps,hs=Object(u["a"])(ms,os,is,!1,null,null,null),fs=hs.exports;a["default"].use(v["a"]);const bs=[{path:"*",redirect:"login"},{path:"/login",name:"TheLogin",component:Z},{path:"/admin",name:"TheDashboard",component:at,children:[{path:"products",name:"TheDashboardProducts",component:ct,meta:{requiresAuth:!0}},{path:"orders",name:"TheDashboardOrders",component:ft,meta:{requiresAuth:!1}},{path:"coupons",name:"TheDashboardCoupons",component:Ct,meta:{requiresAuth:!1}}]},{path:"/",name:"TheCustomer",component:ce,children:[{path:"",name:"TheCustomerContent",component:Ie},{path:"detail/:productId",name:"TheCustomerContentProductDetail",component:Ze},{path:"favor",name:"TheCustomerContentFavor",component:Fe},{path:"coupon",name:"TheCustomerContentCoupon",component:He},{path:"customer_carts",name:"TheCustomerShoppingCartContent",component:rs},{path:"customer_carts_form",name:"TheCustomerShoppingCartForm",component:fs},{path:"customer_checkout/:orderId",name:"TheCustomerCheckout",component:fe}]}],vs=new v["a"]({mode:"history",base:"/shop-demo/",routes:bs});vs.beforeEach((t,e,s)=>{if(t.meta.requiresAuth){const t="https://vue-course-api.hexschool.io/api/user/check";_.a.post(t).then(t=>{t.data.success?s():s({path:"/login"})})}else s()});var gs=vs,_s=function(t){const e=Number(t);return`$${e.toFixed(0).replace(/./g,(t,e,s)=>{const a=e&&"."!==t&&(s.length-e)%3===0?`, ${t}`.replace(/\s/g,""):t;return a})}`},xs=s("5f5b");a["default"].use(xs["a"]);var Cs=s("4eb5"),ys=s.n(Cs);a["default"].use(ys.a);var ws=s("4c93"),$s=s("60d4");Object(ts["c"])("email",ws["a"]),Object(ts["c"])("required",ws["d"]),Object(ts["c"])("min",ws["c"]),Object(ts["c"])("max",ws["b"]),Object(ts["d"])("tw",$s),a["default"].component("ValidationProvider",ts["b"]),a["default"].component("ValidationObserver",ts["a"]);var Ts=s("c90c"),ks=s("4524"),Ss=s("c11d"),Ps=s("d5df"),Os=s("0fea"),Es=s("66fa"),Ls=s("7eb5"),As=s("6b4d"),Is=s("03b1"),zs=s("8295"),Ns=s("494c"),Ds=s("4f97"),js=s("3a9d"),Ms=s("c411"),Fs=s("afce"),Rs=s("e5c7"),Us=s("41a9");a["default"].component("account-circle",Ts["a"]),a["default"].component("account-circle-outline",ks["a"]),a["default"].component("flower-icon",Ss["a"]),a["default"].component("facebook",Ps["a"]),a["default"].component("check-circle",Os["a"]),a["default"].component("clipboard-list-outline-icon",Es["a"]),a["default"].component("close",Ls["a"]),a["default"].component("cart-outline-icon",As["a"]),a["default"].component("ticket-percent",zs["a"]),a["default"].component("trash-can-outline",Ns["a"]),a["default"].component("instagram",Is["a"]),a["default"].component("heart-outline",Ds["a"]),a["default"].component("heart",js["a"]),a["default"].component("numeric-1-circle",Ms["a"]),a["default"].component("numeric-2-circle",Fs["a"]),a["default"].component("numeric-3-circle",Rs["a"]),a["default"].component("youtube",Us["a"]),a["default"].use(s("2ead"));var Bs=s("ce5b"),qs=s.n(Bs);s("bf40");a["default"].use(qs.a);var Gs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"components-base_cardempty"}},[s("v-svg-cart",{staticClass:"text-center mr-5 mt-5"}),s("b-card-text",{staticClass:"text-center mt-4"},[t._v(" "+t._s(t.cardText)+" ")]),s("b-card-text",{staticClass:"text-center"},[t._t("action")],2)],1)},Hs=[],Vs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("svg",{staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","xml:space":"preserve",height:"200px",width:"200px"}},[s("polygon",{staticStyle:{fill:"#e1b382"},attrs:{points:"470.863,313.943 512,88.394 102.715,88.394 90.117,10.988 0,10.988 0,40.988 64.605,40.988\n107,301.479 106.828,301.479 106.828,449.449 418.317,449.449 418.317,419.449 136.828,419.449 136.828,314.293 "}}),s("polygon",{staticStyle:{fill:"#c89666"},attrs:{points:"298.667,88.394 298.667,314.168 470.863,313.943 512,88.394 "}}),s("polygon",{staticStyle:{fill:"#2d545e"},attrs:{points:"88.187,185.884 93.07,215.884 488.748,215.884 494.219,185.884 "}}),s("polygon",{staticStyle:{fill:"#12343b"},attrs:{points:"298.667,185.884 298.667,215.884 488.748,215.884 494.219,185.884 "}}),s("circle",{staticStyle:{fill:"#c89666"},attrs:{cx:"406.77",cy:"434.45",r:"51.563"}}),s("path",{staticStyle:{fill:"#2d545e"},attrs:{d:"M406.769,501.012c-36.703,0-66.563-29.86-66.563-66.563s29.859-66.563,66.563-66.563\ns66.563,29.86,66.563,66.563S443.472,501.012,406.769,501.012z M406.769,397.885c-20.161,0-36.563,16.402-36.563,36.563\ns16.401,36.563,36.563,36.563s36.563-16.402,36.563-36.563S426.93,397.885,406.769,397.885z"}}),s("path",{staticStyle:{fill:"#12343b"},attrs:{d:"M406.769,367.885c-0.034,0-0.068,0.003-0.103,0.003v30c0.034,0,0.068-0.003,0.103-0.003\nc20.161,0,36.563,16.402,36.563,36.563s-16.402,36.563-36.563,36.563c-0.034,0-0.068-0.003-0.103-0.003v30\nc0.034,0,0.068,0.003,0.103,0.003c36.703,0,66.563-29.86,66.563-66.563S443.472,367.885,406.769,367.885z"}}),s("circle",{staticStyle:{fill:"#c89666"},attrs:{cx:"199.17",cy:"434.45",r:"51.563"}}),s("path",{staticStyle:{fill:"#2d545e"},attrs:{d:"M199.173,501.012c-36.703,0-66.563-29.86-66.563-66.563s29.859-66.563,66.563-66.563\ns66.563,29.86,66.563,66.563S235.876,501.012,199.173,501.012z M199.173,397.885c-20.161,0-36.563,16.402-36.563,36.563\ns16.401,36.563,36.563,36.563s36.563-16.402,36.563-36.563S219.334,397.885,199.173,397.885z"}}),s("path",{staticStyle:{fill:"#12343b"},attrs:{d:"M199.173,367.885c-0.035,0-0.068,0.003-0.103,0.003v30c0.034,0,0.068-0.003,0.103-0.003\nc20.161,0,36.563,16.402,36.563,36.563s-16.402,36.563-36.563,36.563c-0.035,0-0.068-0.003-0.103-0.003v30\nc0.034,0,0.068,0.003,0.103,0.003c36.703,0,66.563-29.86,66.563-66.563S235.876,367.885,199.173,367.885z"}}),s("g"),s("g"),s("g"),s("g"),s("g"),s("g"),s("g"),s("g"),s("g"),s("g"),s("g"),s("g"),s("g"),s("g"),s("g")])])},Js=[],Ys={name:"VSvgCart",props:{height:{type:String,default:"200"},width:{type:String,default:"200"}}},Qs=Ys,Ws=Object(u["a"])(Qs,Vs,Js,!1,null,null,null),Zs=Ws.exports,Ks={name:"BaseCardEmpty",components:{VSvgCart:Zs},props:{cardText:{type:String}}},Xs=Ks,ta=Object(u["a"])(Xs,Gs,Hs,!1,null,null,null),ea=ta.exports,sa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"components-basecard_products"}},[s("b-card",{staticClass:"base-card m-1 pt-0",attrs:{"img-src":t.item.imageUrl,"img-alt":t.item.title,"img-top":"","no-body":"",tag:"article"}},[-1!==t.favorList.indexOf(t.item.title)?s("heart",{staticClass:"base-card-favor-icon text-danger",on:{click:function(e){return t.setFavorTitle(t.item)}}}):t._e(),-1===t.favorList.indexOf(t.item.title)?s("heart-outline",{staticClass:"base-card-favor-icon text-danger",on:{click:function(e){return t.setFavorTitle(t.item)}}}):t._e(),s("b-card-body",{staticClass:"p-2"},[s("b-card-title",[s("b-link",{staticClass:"base-card-text-title text-secondary h5",attrs:{variant:"link"},on:{click:function(e){return t.getProduct(t.item.id)}}},[t._v(" "+t._s(t.item.title)+" ")])],1),s("b-card-text",{staticClass:"base-card-text-details text-truncate mb-1"},[t._v(" "+t._s(t.item.description)+" ")]),s("b-card-text",{staticClass:"d-flex justify-content-start align-items-center"},[s("span",{staticClass:"base-card-text-price m-1"},[t._v(" NT "+t._s(t._f("currency")(t.item.price))+" ")]),s("del",{directives:[{name:"show",rawName:"v-show",value:t.item.price!==t.item.origin_price,expression:"item.price !== item.origin_price"}],staticClass:"base-card-text-price-del text-muted m-1"},[t._v(" NT "+t._s(t._f("currency")(t.item.origin_price))+" ")])])],1),s("div",{staticClass:"base-card-btn d-flex justify-content-between m-0 p-2"},[s("a",{staticClass:"card-link",attrs:{href:"#"}},[t.status.loadingItem===t.item.id?s("b-spinner",{attrs:{label:"Spinning",small:"",variant:"danger"}}):t._e(),t.status.loadingItem!==t.item.id?s("cart-outline-icon",{staticClass:"text-danger",on:{click:function(e){return e.preventDefault(),t.addToCart(t.item.id)}}}):t._e()],1),s("b-button",{staticClass:"ml-auto",attrs:{size:"sm",variant:"outline-secondary"},on:{click:function(e){return t.goToProductDetail(t.item.id)}}},[t._v(" 查看更多 ")])],1)],1)],1)},aa=[],ra={name:"BaseCardProducts",props:{item:{type:Object},favorList:{type:Array},status:{type:Object}},methods:{setFavorTitle(t){this.$emit("set-favor-title",t)},getProduct(t){this.$emit("get-product",t)},async addToCart(t){return this.$emit("add-to-cart",t),!0},goToProductDetail(t){this.$emit("go-to-product-detail",t)},async goToShoppingCart(t){const e=await this.addToCart(t);e&&this.$emit("go-to-shopping-cart")}}},oa=ra,ia=Object(u["a"])(oa,sa,aa,!1,null,null,null),na=ia.exports,la=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{attrs:{"aria-label":"Page navigation example"}},[s("ul",{staticClass:"pagination pagination-sm",class:t.justify},[s("li",{staticClass:"page-item",class:{disable:!t.pagination.has_pre}},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.paginationHandler(t.pagination.current_page-1)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,(function(e){return s("li",{key:e,staticClass:"page-item",class:{active:t.pagination.current_page===e}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.paginationHandler(e)}}},[t._v(" "+t._s(e)+" ")])])})),s("li",{staticClass:"page-item",class:{disable:!t.pagination.has_next}},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.paginationHandler(t.pagination.current_page+1)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},ca=[],ua={name:"BPaginationDefault",props:{pagination:Object,justify:String},data(){return{}},methods:{paginationHandler(t){this.$emit("paginate",t)}}},da=ua,pa=Object(u["a"])(da,la,ca,!1,null,null,null),ma=pa.exports;a["default"].component("BaseCardEmpty",ea),a["default"].component("BaseCardProducts",na),a["default"].component("BPaginationDefault",ma),a["default"].prototype._$alert=(t,e="primary",s=2e3)=>({msg:t,duration:s,id:Math.floor(new Date/1e3),variant:e}),a["default"].prototype.$productsFilter={ProductFilters:{rangesFilter(t,e){if(0===e.length)return t;for(const s of e)t=t.filter(t=>t[s.type]>=s.low&&t[s.type]<=s.high);return t},choosesFilter(t,e){let s=[];if(0===e.length)s=t;else for(const a of e)s=s.concat(t.filter(t=>{if(void 0!==t[a.type])return-1!==t[a.type].indexOf(a.value)}));return s}},handler(t,e){return this.doFilter(t,e)},doFilter(t,e){for(const s in e)Object.prototype.hasOwnProperty.call(this.ProductFilters,`${s}Filter`)&&"function"===typeof this.ProductFilters[s+"Filter"]&&(t=this.ProductFilters[s+"Filter"](t,e[s]));return t}},a["default"].filter("currency",_s),a["default"].config.productionTip=!1,new a["default"]({router:gs,store:S,render:t=>t(b)}).$mount("#app")},"5aec":function(t,e,s){},"5c0b":function(t,e,s){"use strict";var a=s("9c0c"),r=s.n(a);r.a},"9c0c":function(t,e,s){},baa7:function(t,e,s){"use strict";var a=s("35b1"),r=s.n(a);r.a}});
//# sourceMappingURL=app.dcde5645.js.map